(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,a){},310:function(e,t,a){e.exports=a(596)},596:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(33),o=a.n(i),l=a(8),s=a(24),c=a(25),u=a(27),d=a(26),p=a(28),m=a(7),h=a(597),g=a(130),f=a.n(g),b=a(22),y=a.n(b),v=a(15),E=a.n(v),w=a(131),S=a.n(w),j=a(96),x=a.n(j),k=a(50),O=a.n(k),C=a(39),P=a.n(C),z=a(136),N=a(35),I=a(34),W=a.n(I),D=a(42),T=a(43),B=a(32),A=a.n(B);function F(){var e=Object(D.a)(["\n\tpadding: 0px 25px 25px 25px;\n\theight: 100%;\n\toverflow-y: auto;\n\tposition: relative;\n"]);return F=function(){return e},e}function L(){var e=Object(D.a)(["\n\twidth: 700px;\n\theight: 100vh;\n\tbackground: white;\n\toutline: none;\n"]);return L=function(){return e},e}function R(){var e=Object(D.a)(["\n\twidth: 80%;\n\tpadding: 20px 60px 20px 60px;\n\tmargin-bottom: 60;\n\tfont-size: 16;\n"]);return R=function(){return e},e}function U(){var e=Object(D.a)(["\n\twidth: 100%;\n\tmargin: 15px auto 0px auto;\n"]);return U=function(){return e},e}function M(){var e=Object(D.a)(["\n\twidth: 80%;\n\tmargin-bottom: 20px;\n\tmargin: 0 auto 20px auto;\n"]);return M=function(){return e},e}function q(){var e=Object(D.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\talign-items: center;\n"]);return q=function(){return e},e}function Z(){var e=Object(D.a)([""]);return Z=function(){return e},e}function V(){var e=Object(D.a)(["\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n"]);return V=function(){return e},e}function G(){var e=Object(D.a)(["\n\tpadding: 10px 15px;\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n\tdisplay: flex;\n\talign-items: start;\n"]);return G=function(){return e},e}function J(){var e=Object(D.a)(["\n\tflex-direction: column;\n"]);return J=function(){return e},e}function K(){var e=Object(D.a)(["\n\tmax-width: 1000px;\n\tmargin: 0 auto;\n\tpadding-top: 40px;\n\tmargin-bottom: 40px;\n\tdisplay: flex;\n\tjustify-content: center;\n"]);return K=function(){return e},e}var Y=function(e){var t=e.className,a=e.children;return r.a.createElement(A.a,{className:t},a)},H=Object(T.a)(function(e){var t=e.className,a=e.children;return r.a.createElement("div",{className:t},a)})(K()),X=T.a.div(J()),Q=Object(T.a)(Y)(G()),$=T.a.div(V()),_=T.a.div(Z()),ee=T.a.div(q()),te=(Object(T.a)(Y)(M()),Object(T.a)(Y)(U())),ae=Object(T.a)(Y)(R()),ne=T.a.div(L()),re=T.a.div(F()),ie=a(51),oe=a.n(ie),le=a(69),se=a.n(le),ce=a(49),ue=a.n(ce),de=a(128),pe=a.n(de),me=function(e){var t=e.message;return r.a.createElement(pe.a,{style:{backgroundColor:"#fca525",margin:"15px 0 35px 0",maxWidth:"100%"},message:r.a.createElement("span",{style:{display:"flex",marginLeft:"-5px"}},r.a.createElement(N.h,{style:{fontSize:50,height:"100%",marginRight:10}}),r.a.createElement("span",null,r.a.createElement("div",{style:{fontWeight:"bold"}},"Uwaga!"),t))})},he=a(48),ge=a.n(he),fe=a(13),be=function(e){return{modalTitle:{textAlign:"center",fontSize:28,paddingTop:15},form:{marginTop:10,marginBottom:40},textField:{display:"block",marginBottom:15,marginTop:0},select:{marginBottom:15},textFieldMultiline:{display:"block",margin:8},btn:{marginRight:15}}},ye=["polskie piosenki","zagraniczne piosenki","piosenki harcerskie","piosenki religijne","piosenki turystyczne","piosenki ludowe","pie\u015bni patriotyczne","piosenki dla dzieci","szanty","kol\u0119dy","biesiadne"],ve=Object(fe.withStyles)(be)(function(e){var t=e.song,a=t.category,n=void 0===a?"":a,i=t.title,o=void 0===i?"":i,l=t.performer,s=void 0===l?"":l,c=t.description,u=void 0===c?"":c,d=e.handleSubmit,p=e.handleChange,m=e.handleChangeSongText,h=e.handleCloseModal,g=e.handleSongPreview,f=e.error,b=e.classes;return r.a.createElement(re,null,r.a.createElement(y.a,{className:b.modalTitle},"DODAJ PIOSENK\u0118"),r.a.createElement("form",{onSubmit:d,className:b.form},r.a.createElement(oe.a,{id:"outlined-full-width",label:"Tytu\u0142 *",error:f.title,name:"title",style:be.textField,onChange:p,value:o,autoComplete:"off",placeholder:"Wpisz nazw\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(oe.a,{id:"outlined-full-width",label:"Wykonawca",name:"performer",style:be.textField,onChange:p,value:s,autoComplete:"off",placeholder:"Wpisz wykonawc\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ue.a,{error:f.category},r.a.createElement(ge.a,{shrink:!0,htmlFor:"select-multiple-native"},"Kategoria *"),r.a.createElement(se.a,{native:!0,value:n,onChange:p,name:"category",style:be.select,inputProps:{id:"select-multiple-native"}},n?null:r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),ye.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(me,{message:"Kolejne wersy oddzielaj enterem. Chwyty przypisane do danego wersu dodawaj w tej samej linii w nawiasach ostrych, oddzielonymi przecinkami, np. Gdzie strumyk p\u0142ynie z wolna... <G, d, C>."}),r.a.createElement(oe.a,{id:"outlined-textarea",label:"Tekst piosenki *",error:f.description,name:"description",onChange:m,value:u,placeholder:"Tutaj wpisz tekst piosenki oraz chwyty",style:be.textField,multiline:!0,rows:"18",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},helperText:"* pola obowi\u0105zkowe"}),r.a.createElement(E.a,{className:b.btn,type:"submit"},"Zatwierd\u017a"),r.a.createElement(E.a,{className:b.btn,onClick:h},"Wyjd\u017a"),r.a.createElement(E.a,{className:b.btn,onClick:g},"Podgl\u0105d")))}),Ee=a(52),we=a.n(Ee),Se=function(e){var t=e.description,a=(void 0===t?"":t).split("\n").map(function(e){return{text:e.split("<")[0]?e.split("<")[0].trim():null,chords:e.split("<")[1]?e.split("<")[1].trim().slice(0,-1).split(",").join(", "):null}});return""===a[a.length-1].text&&""===a[a.length-2].text&&(a.pop(),a.pop()),""===a[a.length-1].text&&a.pop(),a},je=function(e){return{wrapper:Object(m.a)({zIndex:9e3,paddingBottom:115},e.breakpoints.down("sm"),{position:"relative",paddingTop:0}),verse:{display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("xs"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("xs"),{width:"25%"}),container:{width:"100%",padding:15},spinnerWrapper:{display:"flex",justifyContent:"center"}}},xe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={song:{},fetchInProgress:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.songId;this.setState({fetchInProgress:!0}),fetch("".concat("https://app-songbook.firebaseio.com/","/songs/").concat(t,".json")).then(function(e){return e.json()}).then(function(t){e.setState({song:t,fetchInProgress:!1})})}},{key:"render",value:function(){var e=this.state,t=e.song,a=e.song,i=a.performer,o=void 0===i?"":i,l=a.title,s=void 0===l?"":l,c=a.category,u=void 0===c?"":c,d=e.fetchInProgress,p=this.props.classes,m=Se(t);return r.a.createElement(H,{className:p.wrapper},r.a.createElement(ae,{className:p.container},d?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(we.a,{type:"Oval",color:"#039be5",width:120,height:120})):r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,o?o+" - "+s:s),r.a.createElement("h4",null,u),m.map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,className:p.verse},r.a.createElement("span",{className:p.text},e.text),r.a.createElement("span",{className:p.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})}))))}}]),t}(n.Component),ke=Object(fe.withStyles)(je)(xe),Oe=Object(fe.withStyles)(je)(function(e){var t=e.classes,a=e.isPreviewed,n=e.handleSongPreview,i=e.song,o=e.song,l=o.performer,s=void 0===l?"":l,c=o.title,u=void 0===c?"":c,d=o.category,p=void 0===d?"":d,m=Se(i);return r.a.createElement(W.a,{open:a,style:{zIndex:11e3}},r.a.createElement(ee,null,r.a.createElement(ne,null,r.a.createElement("div",{style:{padding:"20px 30px",height:"100%",overflow:"auto"}},r.a.createElement("h2",null,s?s+" - "+u:u),r.a.createElement("h4",null,p),m.map(function(e,a){return null!==e.text?r.a.createElement("p",{key:a,className:t.verse},r.a.createElement("span",{className:t.text},e.text),r.a.createElement("span",{className:t.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:a})}),r.a.createElement(E.a,{onClick:n},"Wr\xf3\u0107")))))}),Ce=a(38),Pe=a.n(Ce),ze=a(41),Ne=a.n(ze),Ie=Ne()(Pe()()),We=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,isError:!1,error:{title:!1,description:!1,category:!1},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}},a.handleOpen=function(){a.setState({open:!0}),document.querySelector("body").classList.add("not-scrollable")},a.handleClose=function(){a.setState({open:!1,isError:!1,error:{title:!1,description:!1,category:!1}}),document.querySelector("body").classList.remove("not-scrollable")},a.handleChange=function(e){var t=e.currentTarget.name,n=a.state,r=n.error,i=n.song;a.setState({song:Object(l.a)({},i,Object(m.a)({},t,e.target.value)),error:Object(l.a)({},r,Object(m.a)({},t,(r[t],!1)))})},a.handleChangeSongText=function(e){var t=e.currentTarget.name,n=a.state,r=n.error,i=n.song,o=e.target.value;o=(o=o.startsWith("\n")?o.substr(1):o).endsWith("\n\n\n")?o.substr(0,o.length-1):o,a.setState({song:Object(l.a)({},i,Object(m.a)({},t,o)),error:Object(l.a)({},r,Object(m.a)({},t,(r[t],!1)))})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.song,n=Object.keys(t).filter(function(e){return"performer"!==e}).filter(function(e){return""===t[e]}),r=n.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});n.length>0?a.setState(Object(l.a)({},a.state,{isError:!0,error:r})):Ht.ref("songs-to-approve").push().set(Object(l.a)({},t,{isApproved:!1})).then(function(){alert("Piosenka wys\u0142ana do moderacji! Akceptacja mo\u017ce potrwa\u0107 do kilku dni."),a.setState({open:!1,isError:!1,error:{},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}})}).catch(function(e){return alert(e.message)})},a.handleSongPreview=function(){var e=a.state.isPreviewed;a.setState(Object(l.a)({},a.state,{isPreviewed:!e}))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.song,i=t.open,o=t.isPreviewed,l=t.isError,s=t.error,c=this.props.classes;return r.a.createElement(Ie,null,function(t){var u=t.width;return r.a.createElement(n.Fragment,null,"xs"===u||"sm"===u?r.a.createElement(O.a,{className:c.xs,onClick:e.handleOpen},r.a.createElement(N.a,null)):r.a.createElement(E.a,{className:c.Btn,variant:"outlined",onClick:e.handleOpen},"Dodaj utw\xf3r"),r.a.createElement(W.a,{open:i,className:c.wrapper},r.a.createElement(ee,null,r.a.createElement("div",{className:c.modalWrapper},r.a.createElement(ve,{song:a,handleSubmit:e.handleFormSubmit,handleChange:e.handleChange,handleChangeSongText:e.handleChangeSongText,handleCloseModal:e.handleClose,handleSongPreview:e.handleSongPreview,error:s,isError:l,screenSize:u})))),r.a.createElement(Oe,{isPreviewed:o,handleSongPreview:e.handleSongPreview,song:a}))})}}]),t}(n.Component),De=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:9800},modalWrapper:Object(m.a)({transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000",position:"absolute",top:0,height:"100%",width:"700px",background:"white",outline:"none"},e.breakpoints.down("sm"),{width:"100%",maxWidth:"100%",left:0}),Btn:Object(m.a)({color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",borderColor:"white",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},e.breakpoints.down("sm"),{"&:hover":{backgroundColor:e.palette.primary.main}}),xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:hover":{backgroundColor:e.palette.primary.main}}}})(We),Te=a(56),Be=a(180),Ae=a.n(Be),Fe=a(240),Le=a.n(Fe),Re=a(10),Ue=a.n(Re);Ae.a.vfs=Le.a.pdfMake.vfs;var Me=Ne()(Pe()()),qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[]},a.createPDF=function(){var e=a.state,t=e.title,n=void 0===t?"":t,r=e.songs.map(function(e,t){return[{text:t+1+". "+e.title,style:"header"},{columns:[{width:"75%",text:e.description.split("\n").map(function(e){return e.split("<")[0]?e.split("<")[0].trim():""}).join("\n")},{width:"20%",text:e.description.split("\n").map(function(e){return e.split("<")[1]?e.split("<")[1].trim().slice(0,-1).split(", ").join(" "):""}).join("\n")}]}]}),i={header:{text:"app.spiewnik - najwi\u0119ksza podr\u0119czna baza piosenek",style:"watermark"},footer:function(e,t){return[{text:e.toString()+" z "+t,alignment:"center"}]},content:[{text:n,style:"title"}].concat(Object(Te.a)(r)),styles:{title:{marginBottom:15,fontSize:25,bold:!0},header:{fontSize:18,bold:!0,marginBottom:6,marginTop:15},watermark:{marginLeft:40,marginTop:15,fontSize:8}}};Ae.a.createPdf(i).open()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.songs,a=this.props,n=a.classes,i=a.playlist;return r.a.createElement(Me,null,function(a){var o=a.width;return"xs"!==o&&"sm"!==o||i?r.a.createElement(E.a,{variant:"contained",className:Ue()(n.Btn,n.active),disabled:Boolean(!t.length),onClick:t.length?e.createPDF:null},"Pobierz plik PDF"):r.a.createElement(O.a,{className:Ue()(n.xs,n.active),disabled:Boolean(!t.length)&&!i,onClick:t.length?e.createPDF:null},r.a.createElement(N.d,null))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.songs.length!==t.songs.length?{title:e.title,songs:e.songs}:null}}]),t}(n.Component),Ze=Object(fe.withStyles)({Btn:{color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,display:"inline-flex"},xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"}},active:{backgroundColor:"#DC244A",color:"white","&:hover":{backgroundColor:"#c72042"}},disabled:{color:"#cbd3df",backgroundColor:"#a4b0bd"}})(qe),Ve=a(98),Ge=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.songs,i=void 0===a?[]:a,o=e.removeSong;return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{className:t.title},"Wybrane piosenki"),r.a.createElement(Ve.c,{droppableId:"playlist"},function(e){return r.a.createElement(_,Object.assign({ref:e.innerRef},e.droppableProps),i.map(function(e,a){var n=e.id,i=e.performer,l=e.title;return r.a.createElement(Ve.b,{key:a,draggableId:n,index:a},function(e){return r.a.createElement($,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(A.a,{style:{width:"100%",padding:"10px"},elevation:1},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(N.f,{className:t.dragIcon}),r.a.createElement(y.a,{className:t.songTitle},a+1,". ",i?i+" - "+l:l),r.a.createElement(z.b,{onMouseEnter:function(e){return e.target.style.cursor="pointer"},onClick:function(){return o(n)},className:t.trashIcon}))))})}),e.placeholder)}))}}]),t}(n.Component),Je=Object(fe.withStyles)({title:{fontSize:18,margin:"15px 0 15px 0"},songTitle:{width:"100%",fontSize:16,display:"flex",alignItems:"center"},dragIcon:{width:35,fontSize:27,marginRight:15},trashIcon:{width:35,fontSize:20,marginRight:15}})(Ge),Ke=a(137),Ye=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1,isEditing:!1,isError:!1,playlist:{id:null,title:"",isPublic:!1,songs:[]}},a.handleChange=function(e){a.setState(Object(l.a)({},a.state,{playlist:Object(l.a)({},a.state.playlist,{title:e.target.value})}))},a.handleSelectChange=function(e){a.setState(Object(l.a)({},a.state,{playlist:Object(l.a)({},a.state.playlist,{isPublic:Boolean(e.target.value)})}))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.playlist,n=a.props.user,r=Object.keys(t).filter(function(e){return"id"!==e}).filter(function(e){return""===t[e]||0===t[e].length}),i=r.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});if(r.length>0)a.setState(Object(l.a)({},a.state,{isError:!0,error:i}));else if(t.id&&t.isPublic){var o=Ht.ref("users/".concat(n.uid,"/playlists/").concat(t.id));Ht.ref("playlists/".concat(t.id)).update(t).then(function(){o.update(t).then(function(){alert("Playlista zosta\u0142a zedytowana"),a.props.handleSelectSongs([])})}).then(function(){return a.props.fetchData()}).catch(function(e){alert(e.message)})}else if(null===t.id&&t.isPublic){var s=Ht.ref("playlists").push(),c=Ht.ref("users/".concat(n.uid,"/playlists/").concat(s.key));s.set(Object(l.a)({},t,{id:s.key,userEmail:n.email})).then(function(){c.set(Object(l.a)({},t,{id:s.key,userEmail:n.email,isPublic:!0})).then(function(){alert("Doda\u0142e\u015b publiczn\u0105 playlist\u0119!"),a.props.handleSelectSongs([]),a.props.handleClose()})}).catch(function(e){alert(e.message)})}else if(t.isPublic||t.id)t.isPublic||!t.id||Ht.ref("users/".concat(n.uid,"/playlists/").concat(t.id)).update(t).then(function(){alert("Edycja playlisty powiod\u0142a si\u0119"),a.props.handleSelectSongs([])}).then(function(){return a.props.fetchData()}).catch(function(e){alert(e.message)});else{var u=Ht.ref("users/".concat(n.uid,"/playlists")).push();u.set(Object(l.a)({},t,{id:u.key,userId:n.uid,userEmail:n.email})).then(function(){alert("Twoja prywatna playlista zosta\u0142a dodana"),a.props.handleSelectSongs([]),a.props.handleClose()}).catch(function(e){alert(e.message)})}},a.handleClose=function(){var e=a.props.handleClose;a.setState({open:!1,isEditing:!1,editedPlaylist:""}),e()},a.onDragStart=function(){window.navigator.vibrate&&window.navigator.vibrate(100)},a.onDragEnd=function(e){var t=e.destination,n=e.source,r=e.draggableId,i=a.state.playlist.songs;if(t&&t.index!==n.index){var o=Array.from(a.state.playlist.songs);o.splice(n.index,1),o.splice(t.index,0,i.find(function(e){return e.id===r})),a.setState({playlist:Object(l.a)({},a.state.playlist,{songs:o})})}},a.handleRemovePlaylistSong=function(e){var t=a.state.playlist.songs.filter(function(t){return t.id!==e});a.setState(Object(l.a)({},a.state,{playlist:Object(l.a)({},a.state.playlist,{songs:t})}))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isCreating,a=e.isEditing,n=e.isError,i=e.playlist,o=i.songs,l=void 0===o?[]:o,s=i.title,c=void 0===s?"":s,u=i.isPublic,d=void 0!==u&&u,p=this.props,m=p.classes,h=p.selectedSongs;return r.a.createElement(Ve.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.a.createElement(W.a,{open:t||a,className:m.wrapper},r.a.createElement(ee,null,r.a.createElement("div",{className:m.modalWrapper},r.a.createElement(re,null,r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:m.form},r.a.createElement(Ke.a,{className:m.modalTitle},"DODAJ PLAYLIST\u0118"),r.a.createElement(oe.a,{id:"outlined-full-width",label:"Nazwa",name:"nazwa",onChange:this.handleChange,value:c,error:n,autoComplete:"off",placeholder:"Podaj nazw\u0119 dla playlisty",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ue.a,null,r.a.createElement(ge.a,{shrink:!0,htmlFor:"select-multiple-native"},"Publiczne czy prywatne"),r.a.createElement(se.a,{native:!0,value:d,onChange:this.handleSelectChange,name:"is-public",inputProps:{id:"select-multiple-native"}},r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),r.a.createElement("option",{value:!0},"Publiczne"),r.a.createElement("option",{value:!1},"Prywatne"))),a&&r.a.createElement(me,{message:"Jesli chcesz doda\u0107 utwory, wr\xf3\u0107 do listy piosenek, zaznacz utwory i wr\xf3\u0107 tutaj ponownie. Wybrane piosenki pojawi\u0105 si\u0119 na dole listy. Pami\u0119taj, \u017ce nie pojawi si\u0119 piosenka, kt\xf3ra ju\u017c znajduje si\u0119 na li\u015bcie. "}),r.a.createElement(Je,{songs:l,selectedSongs:h,removeSong:this.handleRemovePlaylistSong}),r.a.createElement(E.a,{style:{marginRight:15},type:"submit"},"Zatwierd\u017a"),r.a.createElement(E.a,{onClick:this.handleClose},"Wyjd\u017a")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.isCreating&&void 0!==e.selectedSongs&&void 0!==t.playlist.songs&&0===t.playlist.songs.length&&0!==e.selectedSongs.length&&!0!==e.isEditing&&!0!==t.isEditing)return Object(l.a)({},t,{isCreating:!0,playlist:Object(l.a)({},t.playlist,{title:"",songs:e.selectedSongs})});if(Boolean(e.editedPlaylist.id)&&e.isEditing&&!0!==t.isEditing){var a=void 0===e.editedPlaylist.songs?[]:e.editedPlaylist.songs,n=Object(Te.a)(a).concat(e.selectedSongs),r=n.map(function(e){return e.id}).map(function(e,t,a){return a.indexOf(e)===t&&t}).filter(function(e){return n[e]}).map(function(e){return n[e]});return Object(l.a)({},t,{playlist:Object(l.a)({},e.editedPlaylist,{songs:r}),isEditing:!0})}return null}}]),t}(n.Component),He=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:1e4},modalTitle:{textAlign:"center",fontSize:28},modalWrapper:Object(m.a)({width:700,height:"100vh",background:"white",outline:"none"},e.breakpoints.down("sm"),{top:0,left:0,width:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000",position:"absolute",height:"100%",background:"white",outline:"none"}),form:Object(m.a)({marginTop:70},e.breakpoints.down("sm"),{marginTop:10}),formWrapper:Object(m.a)({padding:"0px 25px 25px 25px",height:"100%",overflowY:"auto",position:"relative"},e.breakpoints.down("sm"),{padding:8})}})(Ye),Xe=Ne()(Pe()()),Qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1},a.handleCreate=function(){a.setState({isCreating:!0}),document.querySelector("body").classList.add("not-scrollable")},a.handleClose=function(){a.setState({isCreating:!1}),document.querySelector("body").classList.remove("not-scrollable")},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isCreating,a=this.props.classes,i=this.props,o=i.selectedSongs,l=void 0===o?[]:o,s=i.editedPlaylist,c=void 0===s?"":s,u=i.handleSelectSongs,d=i.user;return r.a.createElement(Xe,null,function(i){var o=i.width;return r.a.createElement(n.Fragment,null,"xs"===o||"sm"===o?r.a.createElement(O.a,{className:a.xs,disabled:0===l.length,onClick:l.length>0?e.handleCreate:null},r.a.createElement(N.g,null)):r.a.createElement(E.a,{variant:"outlined",disabled:0===l.length,className:a.Btn,onClick:l.length>0?e.handleCreate:null},"Dodaj playlist\u0119"),t&&r.a.createElement(He,{selectedSongs:l,handleSelectSongs:u,editedPlaylist:c,isCreating:t,handleClose:e.handleClose,user:d}))})}}]),t}(n.Component),$e=Object(fe.withStyles)(function(e){return{Btn:{color:"white",borderColor:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"},"&:hover":{backgroundColor:e.palette.primary.main}}}})(Qe),_e=a(129),et=a.n(_e),tt=a(83),at=a.n(tt),nt=a(64),rt=a.n(nt),it=a(244),ot=a.n(it),lt=a(55),st=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",open:!1,fetchInProgress:null},a.handleChange=function(e){a.setState(Object(m.a)({},e.currentTarget.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.signUp?(a.setState({fetchInProgress:!0}),lt.auth().createUserWithEmailAndPassword(n,r).then(function(e){lt.database().ref("users/".concat(e.user.uid)).set({email:n,password:r,uid:e.user.uid}),alert("Rejestracja sie powiod\u0142a!"),a.setState({fetchInProgress:!1})}).catch(function(e){alert(e.message)})):(a.setState({fetchInProgress:!0}),lt.auth().signInWithEmailAndPassword(n,r).then(function(){alert("Logowanie sie powiod\u0142o!"),a.setState({fetchInProgress:!1}),a.props.handleClose()}).catch(function(e){alert(e.message),a.props.handleClose()}))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isSignedUp,n=e.isOpen,i=e.handleClose,o=this.state.fetchInProgress,l=a?"Zarejestruj si\u0119":"Zaloguj si\u0119";return r.a.createElement(W.a,{open:n,onClose:function(){return i()},className:t.wrapper},r.a.createElement("main",{className:t.main},r.a.createElement(at.a,null),r.a.createElement(A.a,{className:t.paper},r.a.createElement(et.a,{className:t.avatar},r.a.createElement(ot.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},l),o?r.a.createElement("div",{className:t.spinnerWrapper},r.a.createElement(we.a,{type:"Oval",color:"#ee6a03",width:120,height:120})):null,r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ge.a,{htmlFor:"email"},"Adres email"),r.a.createElement(rt.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ge.a,{htmlFor:"password"},"Has\u0142o"),r.a.createElement(rt.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},l)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.open!==e.isOpen?{open:e.isOpen}:null}}]),t}(n.Component),ct=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:1e4},main:Object(m.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",position:"relative",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},spinnerWrapper:{position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:12e3}}})(st),ut=(a(565),a(236),Ne()(Pe()())),dt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,signUp:!1,isOpen:!1},a.handleChange=function(e,t){a.setState({value:t})},a.handleSignInOpen=function(){a.setState({isOpen:!0,signUp:!1}),document.querySelector("body").classList.add("not-scrollable")},a.handleSignUpOpen=function(){a.setState({isOpen:!0,signUp:!0}),document.querySelector("body").classList.add("not-scrollable")},a.handleClose=function(){a.setState({isOpen:!1}),document.querySelector("body").classList.remove("not-scrollable")},a.logOut=function(){lt.auth().signOut()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){"/lista-piosenek"===window.location.pathname&&this.setState({value:0}),"/playlisty"===window.location.pathname&&this.setState({value:1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,i=t.signUp,o=t.isOpen,l=this.props,s=l.classes,c=l.user,u=l.selectedSongs,d=l.editedPlaylist,p=l.handleSelectSongs;return r.a.createElement(ut,null,function(t){var l=t.width;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:Ue()(s.AppBar,s.firstAppBar)},r.a.createElement("div",{className:s.maxWidth},r.a.createElement("div",{className:s.logoContainer},r.a.createElement(z.a,{className:s.logoIcon}),r.a.createElement(y.a,{component:h.a,to:"/lista-piosenek",variant:"h6",color:"inherit",className:s.logoText},"\u015apiewnik")),r.a.createElement("div",{className:s.userContainer},c?r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{variant:"subtitle2",style:{color:"white"}},"U\u017cytkownik:",r.a.createElement("span",{style:{fontWeight:"bold"}}," ",c.email)),r.a.createElement(E.a,{className:Ue()(s.Btn,s.logoutBtn),onClick:e.logOut},"Wyloguj si\u0119")):r.a.createElement(n.Fragment,null,r.a.createElement(ct,{isOpen:o,signUp:i,handleClose:e.handleClose}),r.a.createElement(E.a,{className:Ue()(s.Btn,s.loginBtn),onClick:e.handleSignInOpen},"Zaloguj si\u0119"),r.a.createElement(E.a,{variant:"contained",className:Ue()(s.Btn,s.registerBtn),onClick:e.handleSignUpOpen},"Zarejestruj si\u0119"))))),r.a.createElement("div",{className:Ue()(s.AppBar,s.secondAppBar)},r.a.createElement(P.a,{container:!0,className:s.maxWidth},r.a.createElement(P.a,{item:!0,lg:6,className:s.toolBarGrid},r.a.createElement(f.a,{variant:"dense"},r.a.createElement(S.a,{value:a,onChange:e.handleChange},r.a.createElement(x.a,{component:h.a,to:"/lista-piosenek",label:"Lista piosenek",classes:{label:"logo-text"}}),r.a.createElement(x.a,{component:h.a,to:"/playlisty",label:"Playlisty",classes:{label:"logo-text"}})))),r.a.createElement(P.a,{item:!0,md:6,sm:6,xs:12,className:s.flexEnd},"xs"===l||"sm"===l?r.a.createElement("div",{className:s.mobileDeviceButtonsContainer},r.a.createElement(O.a,{className:s.filterBtn,onClick:function(){return e.props.toggleDrawer(!0)},disabled:"/lista-piosenek"!==window.location.pathname},r.a.createElement(N.e,null)),r.a.createElement(De,null),c?r.a.createElement($e,{editedPlaylist:d,selectedSongs:u,handleSelectSongs:p,user:c}):null,r.a.createElement(Ze,{isButton:!0,songs:u})):r.a.createElement(n.Fragment,null,r.a.createElement(De,null),c?r.a.createElement($e,{editedPlaylist:d,selectedSongs:u,handleSelectSongs:p,user:c}):null,r.a.createElement(Ze,{songs:u}))))))})}}]),t}(n.Component),pt=Object(fe.withStyles)(function(e){return{AppBar:{backgroundColor:e.palette.primary.main,height:55,alignItems:"center"},firstAppBar:Object(m.a)({position:"static",boxShadow:"none"},e.breakpoints.down("xs"),{height:95,display:"flex",flexDirection:"column"}),secondAppBar:{position:"sticky",top:0,zIndex:9500},logoIcon:Object(m.a)({fontSize:"38px",color:"white",marginRight:"25px"},e.breakpoints.down("xs"),{marginRight:5}),logoText:{letterSpacing:3,fontSize:22,textDecoration:"none",color:"white",fontFamily:"'Montserrat', sans-serif"},logoContainer:Object(m.a)({display:"flex",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-start"}),userContainer:Object(m.a)({display:"flex",justifyContent:"flex-end",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-end"}),maxWidth:Object(m.a)({height:"100%",maxWidth:1030,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexDirection:"column",justifyContent:"space-around",margin:0,width:"100%"}),Btn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginLeft:15},loginBtn:{"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},registerBtn:{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},logoutBtn:Object(m.a)({"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},e.breakpoints.down("xs"),{padding:0}),label:{textTransform:"none"},toolBarGrid:Object(m.a)({},e.breakpoints.down("xs"),{alignSelf:"flex-start"}),filterBtn:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"},"&:hover":{backgroundColor:e.palette.primary.main,color:"white"}},mobileDeviceButtonsContainer:{position:"fixed",bottom:30,right:"50%",transform:"translate(50%, 0%)",width:250,display:"flex",justifyContent:"space-evenly"}}})(dt),mt=function(e){var t=e.handleChange,a=e.label,n=e.placeholder;return r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(oe.a,{id:"standard-full-width",label:a,placeholder:n,fullWidth:!0,onChange:t,margin:"normal",InputLabelProps:{shrink:!0}}))},ht=a(70),gt=a.n(ht),ft=a(53),bt=a.n(ft),yt=a(54),vt=a.n(yt),Et=Ne()(Pe()()),wt="https://app-songbook.firebaseio.com/",St=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:"",playlists:[],editedPlaylist:{},isEditing:!1,isPublic:!0,category:"public",fetchInProgress:null},a.getPublicPlaylists=function(){a.setState({fetchInProgress:!0}),fetch("".concat(wt,"/playlists.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(l.a)({id:t},e[t])});a.setState({playlists:t||[]}),a.setState({fetchInProgress:!1})})},a.getPrivatePlaylists=function(){var e=a.props.user;e&&(a.setState({fetchInProgress:!0}),Ht.ref("users/".concat(e.uid,"/playlists/")).once("value").then(function(e){var t=e.val(),n=t&&Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])}),r=n?n.filter(function(e){return!1===e.isPublic}):[];a.setState({playlists:r||[]}),a.setState({fetchInProgress:!1})}))},a.getUsersPlaylists=function(){var e=a.props.user;e&&(a.setState({fetchInProgress:!0}),Ht.ref("users/".concat(e.uid,"/playlists/")).once("value").then(function(e){var t=e.val(),n=t&&Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])});a.setState({playlists:n||[]}),a.setState({fetchInProgress:!1})}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleCategorySelect=function(e){"public"===e&&(a.setState({category:e,isPublic:!0}),a.getPublicPlaylists()),"private"===e&&(a.setState({category:e,isPublic:!1}),a.getPrivatePlaylists()),"yours"===e&&(a.setState({category:e}),a.getUsersPlaylists())},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPublicPlaylists()}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputValue,i=void 0===a?"":a,o=t.playlists,l=void 0===o?[]:o,s=t.category,c=t.isPublic,u=t.fetchInProgress,d=this.props,p=d.classes,m=d.user,g=l.filter(function(e){var t=e.title.toLowerCase(),a=i.trim().toLowerCase();return t.includes(a)});return r.a.createElement(Et,null,function(t){var a=t.width;return r.a.createElement(H,{className:p.wrapper},r.a.createElement(P.a,{container:!0,spacing:"sm"===a||"xs"===a?0:24},r.a.createElement(P.a,{item:!0,md:4,xs:12},r.a.createElement(A.a,{className:p.categoriesContainer},r.a.createElement(gt.a,{component:"nav",style:{background:"white"}},r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("public")}},r.a.createElement(vt.a,{primary:"publiczne"})),m&&r.a.createElement(n.Fragment,null,r.a.createElement(bt.a,{button:!0,onClick:m?function(){return e.handleCategorySelect("private")}:null},r.a.createElement(vt.a,{primary:"prywatne"})),r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("yours")}},r.a.createElement(vt.a,{primary:"twoje"})))))),r.a.createElement(P.a,{item:!0,md:8,xs:12},r.a.createElement(X,{className:p.playlistsContainer},r.a.createElement(y.a,{className:p.categoryTitle},"yours"===s?"Twoje utworzone playlisty":"public"===s?"Publiczne playlisty":"private"===s?"Prywatne playlisty":void 0),r.a.createElement(mt,{handleChange:e.handleInputChange,label:"Wyszukaj playlist\u0119",placeholder:"Wpisz nazw\u0119 playlisty"}),u?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(we.a,{type:"Oval",color:"#039be5",width:120,height:120})):g.map(function(e){return r.a.createElement(te,{key:e.id},r.a.createElement(h.a,{key:e.id,to:c?"/playlisty/".concat(e.id):"users/".concat(m.uid,"/playlists/").concat(e.id),className:p.link},r.a.createElement(y.a,{className:p.playlistTitle},e.title),r.a.createElement(y.a,{className:p.playlistDescription},void 0!==e.songs&&e.songs.map(function(e,t,a){var n=e.performer,i=e.title,o=e.id;return t<4?t<a.length-1?r.a.createElement("span",{key:o},n?n+" - "+i:i,", "):r.a.createElement("span",{key:o},n?n+" - "+i:i):10===t?" ... ":null}))))})))))})}}]),t}(n.Component),jt=Object(fe.withStyles)(function(e){var t;return{wrapper:Object(m.a)({},e.breakpoints.down("xs"),{paddingTop:0,paddingBottom:"100px"}),playlistsContainer:{padding:10},playlistTitle:{fontSize:18,padding:"15px 15px 5px 15px"},playlistDescription:{padding:"0px 15px 15px 15px"},link:{textDecoration:"none"},categoriesContainer:(t={},Object(m.a)(t,e.breakpoints.down("xs"),{margin:10}),Object(m.a)(t,e.breakpoints.down("sm"),{margin:10}),t),categoryTitle:{fontSize:20,fontWeight:"bold",marginBottom:15},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(St),xt=a(132),kt=a.n(xt),Ot=Object(fe.withStyles)(function(e){return{link:{textDecoration:"none"},title:{fontSize:16},category:{fontSize:13},checkbox:{width:"auto",padding:"0 10px 0 0"}}})(function(e){var t=e.song,a=t.id,n=t.performer,i=t.title,o=t.category,l=e.handleCheckboxSelect,s=e.checked,c=void 0===s?{}:s,u=e.classes;return r.a.createElement(Q,{elevation:1},r.a.createElement(kt.a,{name:a,color:"primary",className:u.checkbox,icon:r.a.createElement(N.c,{fontSize:"big"}),checkedIcon:r.a.createElement(N.b,{fontSize:"big"}),checked:!!c[a]&&c[a],onChange:l}),r.a.createElement(h.a,{to:"/lista-piosenek/".concat(a),className:u.link},r.a.createElement(y.a,{className:u.title},n?n+" - "+i:i),r.a.createElement(y.a,{className:u.category}," "+o)))}),Ct=a(133),Pt=a.n(Ct),zt="https://app-songbook.firebaseio.com/",Nt=Ne()(Pe()()),It=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],category:"",searchText:"",selectedSongs:[],checked:{},fetchInProgress:null},a.fetchSongs=function(){a.setState({fetchInProgress:!0}),fetch("".concat(zt,"/songs.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(l.a)({id:t},e[t])});a.setState({songs:t||[]});var n=t.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t.id,!1))},{}),r=a.props.selectedSongs,i=r.map(function(e){return e.id}).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});a.setState(Object(l.a)({},a.state,{selectedSongs:r,checked:Object.assign(n,i)})),a.setState({fetchInProgress:!1})})},a.handleCategorySelect=function(e){a.setState({category:e})},a.handleChangeForm=function(e){a.setState({searchText:e.target.value.toLowerCase()})},a.handleCheckboxSelect=function(e){var t=e.target.name,n=a.state.songs.find(function(e){return e.id===t});if(!1===a.state.checked[t]){var r=[].concat(Object(Te.a)(a.state.selectedSongs),[n]);a.setState(function(e){return{checked:Object(l.a)({},e.checked,Object(m.a)({},t,!e.checked[t])),selectedSongs:r}}),a.props.handleSelectSongs(r)}else{var i=[].concat(Object(Te.a)(a.state.selectedSongs),[n]).filter(function(e){return e.id!==n.id});a.setState(function(e){return{checked:Object(l.a)({},e.checked,Object(m.a)({},t,!e.checked[t])),selectedSongs:i}}),a.props.handleSelectSongs(i)}},a.handleSelectAll=function(e){var t=a.state.checked,n=Object.keys(t).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{}),r=Object(Te.a)(a.state.selectedSongs).concat(e),i=r.map(function(e){return e.id}).map(function(e,t,a){return a.indexOf(e)===t&&t}).filter(function(e){return r[e]}).map(function(e){return r[e]});i.forEach(function(e){return n[e.id]=!0}),a.setState(Object(l.a)({},a.state,{checked:n,selectedSongs:i})),a.props.handleSelectSongs(i)},a.handleClearSelectAll=function(){var e=a.state.checked,t=Object.keys(e).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{});a.setState({checked:t,selectedSongs:[]}),a.props.handleSelectSongs([])},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ht.ref("songs").on("value",function(t){e.fetchSongs()})}},{key:"componentWillUnmount",value:function(){var e=this;Ht.ref("songs").off("value",function(t){e.fetchSongs()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.songs,i=void 0===a?[]:a,o=t.category,s=void 0===o?"":o,c=t.searchText,u=void 0===c?"":c,d=t.checked,p=t.fetchInProgress,h=this.props,g=h.classes,f=h.isDrawerOpen,b=s?i.filter(function(e){return e.category===s}):i,y=(b=u?b.filter(function(e){return(e.performer.toLowerCase()+e.title.toLowerCase()).includes(u)}):b).sort(function(e,t){var a=e.performer+e.title,n=t.performer+t.title;return a.localeCompare(n)}),v=Object(Te.a)(new Set(y.map(function(e){return e.performer?e.performer:e.title}))).map(function(e){return e.charAt(0)}).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,t))},{}),w=Object(Te.a)(new Set(i.map(function(e){return e.category}))).map(function(t){return r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect(t)},key:t},r.a.createElement(vt.a,{primary:t}))});return r.a.createElement(Nt,null,function(t){var a=t.width;return r.a.createElement(H,{className:g.wrapper},r.a.createElement(P.a,{container:!0,spacing:"xs"===a||"sm"===a?0:24},r.a.createElement(P.a,{item:!0,md:4},"xs"===a||"sm"===a?r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,{open:f,onClose:function(){return e.props.toggleDrawer(!1)},className:g.drawer},r.a.createElement("div",null,r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(vt.a,{primary:"wszystkie"})),w))):r.a.createElement(A.a,{className:g.categories},r.a.createElement(gt.a,{component:"nav",style:{background:"white"}},r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(vt.a,{primary:"wszystkie"})),w))),r.a.createElement(P.a,{item:!0,md:8,className:g.contentGrid},r.a.createElement(E.a,{onClick:function(){return e.handleSelectAll(b)},variant:"outlined",className:g.btn},"Zaznacz wszystkie"),r.a.createElement(E.a,{onClick:e.handleClearSelectAll,variant:"outlined",className:g.btn},"Wyczy\u015b\u0107"),r.a.createElement("div",{style:{width:"100%",margin:"5px 0 15px 0",padding:8}},r.a.createElement(mt,{handleChange:e.handleChangeForm,placeholder:"Wpisz nazw\u0119 artysty lub tytu\u0142 piosenki...",label:"Wyszukaj piosenk\u0119"})),p?r.a.createElement("div",{className:g.spinnerWrapper},r.a.createElement(we.a,{type:"Oval",color:"#039be5",width:120,height:120})):y.map(function(t,a,i){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(Ke.a,{variant:"h4",style:{paddingLeft:10}},function(e,t,a,n){var r=e.performer?e.performer:e.title,i=t>0?a[t-1]:null,o=i?i.performer?i.performer:i.title:null;return i&&r===o?null:n[r.charAt(0)]}(t,a,i,v)),r.a.createElement(Ot,{key:t.id,song:t,checked:d,handleCheckboxSelect:e.handleCheckboxSelect}))}))))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.selectedSongs.length!==t.selectedSongs.length){if(0===e.selectedSongs.length){var a=t.checked,n=Object.keys(a).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{});return Object(l.a)({},t,{selectedSongs:[],checked:n})}return Object(l.a)({},t,{selectedSongs:e.selectedSongs})}return null}}]),t}(n.Component),Wt=Object(fe.withStyles)(function(e){return{wrapper:Object(m.a)({},e.breakpoints.down("xs"),{paddingBottom:"100px"}),btn:{textTransform:"none",marginRight:15},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:270,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:hover":{backgroundColor:e.palette.primary.main,color:"white"}},contentGrid:{width:"100%"},drawer:{zIndex:9600},categories:{position:"sticky",top:95},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(It),Dt=a(598),Tt=function(e){return e.history.push("/lista-piosenek"),r.a.createElement("div",null,"hello")},Bt=a(84),At=a.n(Bt),Ft=a(85),Lt=a.n(Ft),Rt=a(86),Ut=a.n(Rt),Mt=a(138),qt=a.n(Mt),Zt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isEditing:!1,playlist:{},open:!1,fetchInProgress:null},a.getPlaylist=function(){var e=a.props.match.params,t=e.userId,n=e.playlistId;if(t)return a.setState({fetchInProgress:!0}),void Ht.ref("users/".concat(t,"/playlists/").concat(n)).once("value").then(function(e){var t=e.val();a.setState({playlist:Object(l.a)({},t,{id:n})}),a.setState({fetchInProgress:!1})});a.setState({fetchInProgress:!0}),Ht.ref("playlists/".concat(n)).once("value").then(function(e){var t=e.val();a.setState({playlist:Object(l.a)({},t,{id:n})}),a.setState({fetchInProgress:!1})})},a.handleEditPlaylist=function(){a.setState({isEditing:!0})},a.handleCloseEditMode=function(){a.setState({isEditing:!1})},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleRemovePlaylist=function(e){var t=a.props.user;Ht.ref("playlists/".concat(e)).remove().then(function(){Ht.ref("users/".concat(t.uid,"/playlists/").concat(e)).remove().then(function(){alert("Playlist removed")}).then(function(){return a.props.history.push("/playlisty")})}).catch(function(e){return alert(e.message)})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPlaylist()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditing,i=t.playlist,o=t.playlist,l=o.title,s=o.songs,c=void 0===s?[]:s,u=t.fetchInProgress,d=this.props,p=d.classes,m=d.selectedSongs,h=d.handleSelectSongs,g=d.user,f=!!(null!==g)&&g.email===i.userEmail;return r.a.createElement(H,{className:p.wrapper},a&&r.a.createElement(He,{isEditing:a,editedPlaylist:i,handleClose:this.handleCloseEditMode,selectedSongs:m,handleSelectSongs:h,fetchData:this.getPlaylist,user:g}),r.a.createElement(ae,{className:p.container},r.a.createElement("h1",null,l),r.a.createElement("p",null,"Stworzone przez: ",i.userEmail),r.a.createElement("div",{className:p.buttonsWrapper},f?r.a.createElement(n.Fragment,null,r.a.createElement(E.a,{className:p.btn,onClick:function(){return e.handleEditPlaylist(i)}},"Edytuj"),r.a.createElement(E.a,{className:p.btn,onClick:this.handleOpen},"Usu\u0144"),r.a.createElement(W.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:p.deleteModal},r.a.createElement(y.a,{variant:"h6"},"Czy na pewno chcesz usun\u0105\u0107 playlist\u0119?"),r.a.createElement(y.a,{variant:"subtitle1"},"Pami\u0119taj, \u017ce po usuni\u0119ciu playlisty nie ma mo\u017cliwo\u015bci jej przywr\xf3cenia."),r.a.createElement(E.a,{className:p.yesBtn,onClick:function(){return e.handleRemovePlaylist(i.id)}},"Tak"),r.a.createElement(E.a,{variant:"contained",className:p.noBtn,onClick:this.handleClose}," ","Nie")))):null,r.a.createElement(Ze,{playlist:!0,title:l,songs:c})),u?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(we.a,{type:"Oval",color:"#039be5",width:120,height:120})):c.map(function(e,t){return r.a.createElement(At.a,{key:e.id},r.a.createElement(Lt.a,{expandIcon:r.a.createElement(qt.a,null),className:p.summaryContainer},r.a.createElement(y.a,null,e.performer?t+1+". "+e.performer+" - "+e.title:t+1+". "+e.title)),r.a.createElement(Ut.a,{onClick:function(){return console.log(t.toString())},className:p.detailsContainer},r.a.createElement(y.a,{className:p.title},e.performer?e.performer+" - "+e.title:e.title),Se(e).map(function(e,t){return null!==e.text?r.a.createElement(y.a,{className:p.verse,key:t},r.a.createElement("span",{className:p.text},e.text),r.a.createElement("span",{className:p.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))})))}}]),t}(n.Component),Vt=Object(fe.withStyles)(function(e){return{wrapper:Object(m.a)({},e.breakpoints.down("sm"),{paddingTop:0}),container:Object(m.a)({width:"100%",padding:15},e.breakpoints.down("sm"),{width:"100%",padding:10}),buttonsWrapper:{width:"100%",paddingBottom:"15px"},btn:{marginRight:15},yesBtn:{fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginRight:15},noBtn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},summaryContainer:Object(m.a)({padding:"0 15px"},e.breakpoints.down("sm"),{padding:"0 5px"}),detailsContainer:Object(m.a)({display:"block",padding:15},e.breakpoints.down("sm"),{padding:"0 5px"}),title:{fontSize:18},verse:{fontSize:14,display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("sm"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("sm"),{width:"25%"}),deleteModal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:60*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none"},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(Zt),Gt=a(11),Jt=a.n(Gt),Kt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],isAdmin:!1,user:null},a.getSongs=function(){var e=a.props.user;Ht.ref("songs-to-approve").once("value").then(function(t){var n=t.val()||{},r=Object.keys(n).map(function(e){return Object(l.a)({id:e},n[e])});a.setState({songs:r||[],isAdmin:!0,ref:Ht.ref("songs"),user:e})}).catch(function(e){return alert("Probably permission denied")}),Ht.ref("songs-to-approve").on("value",function(e){var t=e.val()||{},n=Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])});a.setState({songs:n||[]})})},a.submitSong=function(e){var t=a.state.songs.find(function(t){return t.id===e});Ht.ref("songs/".concat(t.id)).set(Object(l.a)({},t)).then(function(){alert("Song approved"),Ht.ref("songs-to-approve/".concat(t.id)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})}).catch(function(e){return alert(e.message)})},a.deleteSong=function(e){Ht.ref("songs-to-approve/".concat(e)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props.user;this.state.ref&&this.state.ref.off(),null!==e||this.setState({songs:[],isAdmin:!1,user:null})}},{key:"componentDidUpdate",value:function(e){this.props.user!==e.user&&(this.getSongs(),this.setState({user:this.props.user}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.songs,n=void 0===a?[]:a,i=t.isAdmin,o=this.props.classes;return i?r.a.createElement(H,null,r.a.createElement(X,{className:o.songsWrapper},r.a.createElement("h1",null,"Do zatwierdzenia"),n.map(function(t){return r.a.createElement(At.a,{key:t.id},r.a.createElement(E.a,{color:"primary",variant:"outlined",onClick:function(){return e.submitSong(t.id)}},"Zatwierd\u017a"),r.a.createElement(E.a,{color:"secondary",variant:"outlined",onClick:function(){return e.deleteSong(t.id)}},"Usu\u0144"),r.a.createElement(Lt.a,{expandIcon:r.a.createElement(qt.a,null)},r.a.createElement(y.a,null,t.performer?t.performer+" - "+t.title:t.title)),r.a.createElement(Ut.a,{style:{display:"block"}},Se(t).map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,className:o.verse},r.a.createElement("span",{className:o.text},e.text),r.a.createElement("span",{className:o.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))}))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null===e.user?Object(l.a)({},t,{user:null,isAdmin:!1}):null}}]),t}(n.Component),Yt=Jt()(function(e){return{songsWrapper:Object(m.a)({width:"80%",margin:"0 8px 16px 8px"},e.breakpoints.down("sm"),{width:"100%"}),verse:{display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("sm"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("sm"),{width:"25%"})}})(Kt);lt.initializeApp({apiKey:"AIzaSyC8W028Pyt7eD2EXrvnqlAmXSD0zB007t4",authDomain:"app-songbook.firebaseapp.com",databaseURL:"https://app-songbook.firebaseio.com",projectId:"app-songbook",storageBucket:"app-songbook.appspot.com",messagingSenderId:"666603805553"});var Ht=lt.database(),Xt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,song:"",selectedSongs:[],isDrawerOpen:!1},a.handleSelectSongs=function(e){a.setState({selectedSongs:e})},a.toggleDrawer=function(e){a.setState(Object(l.a)({},a.state,{isDrawerOpen:e}))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=lt.auth().onAuthStateChanged(function(t){e.setState({user:t})});this.setState({ref:t})}},{key:"componentWillUnmount",value:function(){this.state.ref&&this.state.ref()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedSongs,i=t.user,o=t.isDrawerOpen;return r.a.createElement(n.Fragment,null,r.a.createElement(at.a,null),r.a.createElement(pt,{selectedSongs:a,handleSelectSongs:this.handleSelectSongs,user:i,toggleDrawer:this.toggleDrawer}),r.a.createElement(Dt.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(Tt,e)}}),r.a.createElement(Dt.a,{path:"/lista-piosenek/:songId",component:ke}),r.a.createElement(Dt.a,{exact:!0,path:"/lista-piosenek",render:function(t){return r.a.createElement(Wt,Object.assign({handleSelectSongs:e.handleSelectSongs,selectedSongs:a,isDrawerOpen:o,toggleDrawer:e.toggleDrawer},t))}}),r.a.createElement(Dt.a,{exact:!0,path:"/playlisty",render:function(e){return r.a.createElement(jt,Object.assign({user:i},e))}}),r.a.createElement(Dt.a,{path:"/playlisty/:playlistId",render:function(t){return r.a.createElement(Vt,Object.assign({},t,{selectedSongs:a,handleSelectSongs:e.handleSelectSongs,user:i}))}}),r.a.createElement(Dt.a,{path:"/users/:userId/playlists/:playlistId",render:function(t){return r.a.createElement(Vt,Object.assign({selectedSongs:a,handleSelectSongs:e.handleSelectSongs,user:i},t))}}),r.a.createElement(Dt.a,{path:"/admin",render:function(e){return r.a.createElement(Yt,Object.assign({user:i},e))}}))}}]),t}(n.Component),Qt=a(599),$t=Object(fe.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:{main:"#ee6a03",dark:"#e54e03",light:"#ee6a03"}},typography:{useNextVariants:!0}});o.a.render(r.a.createElement(Qt.a,null,r.a.createElement(fe.MuiThemeProvider,{theme:$t},r.a.createElement(Xt,null))),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.321d8710.chunk.js.map