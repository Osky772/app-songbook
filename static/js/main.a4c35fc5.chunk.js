(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{235:function(e,t,n){},309:function(e,t,n){e.exports=n(574)},574:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(33),l=n.n(i),o=n(24),s=n(25),c=n(27),u=n(26),d=n(28),p=n(10),m=n(575),h=n(129),g=n.n(h),f=n(22),b=n.n(f),y=n(15),v=n.n(y),E=n(130),S=n.n(E),j=n(96),k=n.n(j),x=n(38),w=n.n(x),O=n(135),C=n(9),z=n(34),P=n.n(z),N=n(41),W=n(42),I=n(32),T=n.n(I);function B(){var e=Object(N.a)(["\n\tpadding: 0px 25px 25px 25px;\n\theight: 100%;\n\toverflow: auto;\n\tposition: relative;\n"]);return B=function(){return e},e}function D(){var e=Object(N.a)(["\n\twidth: 700px;\n\theight: 100vh;\n\tbackground: white;\n\toutline: none;\n"]);return D=function(){return e},e}function A(){var e=Object(N.a)(["\n\twidth: 80%;\n\tpadding: 20px 60px 20px 60px;\n\tmargin-bottom: 60;\n\tfont-size: 16;\n"]);return A=function(){return e},e}function F(){var e=Object(N.a)(["\n\twidth: 100%;\n\tmargin: 15px auto 0px auto;\n"]);return F=function(){return e},e}function R(){var e=Object(N.a)(["\n\twidth: 80%;\n\tmargin-bottom: 20px;\n\tmargin: 0 auto 20px auto;\n"]);return R=function(){return e},e}function L(){var e=Object(N.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\talign-items: center;\n"]);return L=function(){return e},e}function U(){var e=Object(N.a)([""]);return U=function(){return e},e}function M(){var e=Object(N.a)(["\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n"]);return M=function(){return e},e}function Z(){var e=Object(N.a)(["\n\tpadding: 10px 15px;\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n\tdisplay: flex;\n\talign-items: start;\n"]);return Z=function(){return e},e}function G(){var e=Object(N.a)(["\n\tflex-direction: column;\n"]);return G=function(){return e},e}function V(){var e=Object(N.a)(["\n\tmax-width: 1000px;\n\tmargin: 0 auto;\n\tpadding-top: 40px;\n\tdisplay: flex;\n\tjustify-content: center;\n"]);return V=function(){return e},e}var q=function(e){var t=e.className,n=e.children;return r.a.createElement(T.a,{className:t},n)},J=Object(W.a)(function(e){var t=e.className,n=e.children;return r.a.createElement("div",{className:t},n)})(V()),K=W.a.div(G()),H=Object(W.a)(q)(Z()),X=W.a.div(M()),Y=W.a.div(U()),Q=W.a.div(L()),$=(Object(W.a)(q)(R()),Object(W.a)(q)(F())),_=Object(W.a)(q)(A()),ee=W.a.div(D()),te=W.a.div(B()),ne=n(50),ae=n.n(ne),re=n(68),ie=n.n(re),le=n(48),oe=n.n(le),se=n(82),ce=n.n(se),ue=n(35),de=function(e){var t=e.message;return r.a.createElement(ce.a,{style:{backgroundColor:"#fca525",margin:"15px 0 35px 0",maxWidth:"100%"},message:r.a.createElement("span",{style:{display:"flex",marginLeft:"-5px"}},r.a.createElement(ue.h,{style:{fontSize:50,height:"100%",marginRight:10}}),r.a.createElement("span",null,r.a.createElement("div",{style:{fontWeight:"bold"}},"Uwaga!"),t))})},pe=n(47),me=n.n(pe),he=function(e){var t=e.error,n=e.type,a=[];if("song"===n){var i=t.title,l=t.category,o=t.description;i&&a.push("tytu\u0142"),l&&a.push("kategoria"),o&&a.push("tekst")}if("playlist"===n){var s=t.title,c=t.songs;s&&a.push("tytu\u0142"),c&&a.push("list\u0119 piosenek")}return r.a.createElement("div",{style:0===a.length?{display:"none"}:{display:"block"}},r.a.createElement(ce.a,{style:{backgroundColor:"#d30033",margin:"15px 0 35px 0",height:40,width:"calc(100% - 50px)",maxWidth:"100%",position:"absolute"},message:r.a.createElement("span",{style:{display:"flex",marginLeft:"-5px"}},r.a.createElement(ue.d,{style:{fontSize:15,height:"100%",marginRight:10}}),r.a.createElement("span",null,"Musisz uzupe\u0142ni\u0107 pole:",r.a.createElement("span",{style:{fontWeight:"bold"}}," ",a.join(", ")," "),"song"===n?"aby doda\u0107 piosenk\u0119!":"aby doda\u0107 playlist\u0119"))}))},ge=n(13),fe=function(e){return{form:Object(p.a)({marginTop:70},e.breakpoints.down("xs"),{marginTop:0}),textField:{display:"block",marginBottom:15,marginTop:0},select:{marginBottom:15},textFieldMultiline:{display:"block",margin:8},btn:{marginRight:15}}},be=["polskie piosenki","zagraniczne piosenki","piosenki harcerskie","piosenki religijne","piosenki turystyczne","piosenki ludowe","pie\u015bni patriotyczne","piosenki dla dzieci","szanty","kol\u0119dy","biesiadne"],ye=Object(ge.withStyles)(fe)(function(e){var t=e.song,n=t.category,a=void 0===n?"":n,i=t.title,l=void 0===i?"":i,o=t.performer,s=void 0===o?"":o,c=t.description,u=void 0===c?"":c,d=e.handleSubmit,p=e.handleChange,m=e.handleChangeSongText,h=e.handleCloseModal,g=e.handleSongPreview,f=e.isError,b=e.error,y=e.classes;return r.a.createElement(te,null,f&&r.a.createElement(he,{type:"song",error:b}),r.a.createElement("form",{onSubmit:d,className:y.form},r.a.createElement(ae.a,{id:"outlined-full-width",label:"Tytu\u0142 *",error:b.title,name:"title",style:fe.textField,onChange:p,value:l,autoComplete:"off",placeholder:"Wpisz nazw\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ae.a,{id:"outlined-full-width",label:"Wykonawca",name:"performer",style:fe.textField,onChange:p,value:s,autoComplete:"off",placeholder:"Wpisz wykonawc\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(oe.a,{error:b.category},r.a.createElement(me.a,{shrink:!0,htmlFor:"select-multiple-native"},"Kategoria *"),r.a.createElement(ie.a,{native:!0,value:a,onChange:p,name:"category",style:fe.select,inputProps:{id:"select-multiple-native"}},a?null:r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),be.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(de,{message:"Kolejne wersy oddzielaj enterem. Chwyty przypisane do danego wersu dodawaj w tej samej linii w nawiasach ostrych, oddzielonymi przecinkami, np. Tak, tak, tam w lustrze... <G, d, C>."}),r.a.createElement(ae.a,{id:"outlined-textarea",label:"Tekst piosenki *",error:b.description,name:"description",onChange:m,value:u,placeholder:"Tutaj wpisz tekst piosenki oraz chwyty",style:fe.textField,multiline:!0,rows:"18",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},helperText:"* pola obowi\u0105zkowe"}),r.a.createElement(v.a,{className:y.btn,type:"submit"},"Zatwierd\u017a"),r.a.createElement(v.a,{className:y.btn,onClick:h},"Wyjd\u017a"),r.a.createElement(v.a,{className:y.btn,onClick:g},"Podgl\u0105d")))}),ve=function(e){var t=e.description,n=(void 0===t?"":t).split("\n").map(function(e){return{text:e.split("<")[0]?e.split("<")[0].trim():null,chords:e.split("<")[1]?e.split("<")[1].trim().slice(0,-1):null}});return""===n[n.length-1].text&&""===n[n.length-2].text&&(n.pop(),n.pop()),""===n[n.length-1].text&&n.pop(),n},Ee=function(e){var t;return{wrapper:(t={zIndex:9e3},Object(p.a)(t,e.breakpoints.down("xs"),{paddingTop:0}),Object(p.a)(t,e.breakpoints.down("sm"),{position:"relative"}),t),verse:{display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(p.a)({width:"75%"},e.breakpoints.down("xs"),{width:"70%"}),chords:Object(p.a)({width:"20%"},e.breakpoints.down("xs"),{width:"25%"}),container:{width:"100%",padding:15}}},Se=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={song:{}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.songId;fetch("".concat("https://app-songbook.firebaseio.com/","/songs/").concat(t,".json")).then(function(e){return e.json()}).then(function(t){e.setState({song:t})})}},{key:"render",value:function(){var e=this.state,t=e.song,n=e.song,a=n.performer,i=void 0===a?"":a,l=n.title,o=void 0===l?"":l,s=n.category,c=void 0===s?"":s,u=this.props.classes,d=ve(t);return r.a.createElement(J,{className:u.wrapper},r.a.createElement(_,{className:u.container},r.a.createElement("h2",null,i?i+" - "+o:o),r.a.createElement("h4",null,c),d.map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,className:u.verse},r.a.createElement("span",{className:u.text},e.text),r.a.createElement("span",{className:u.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))}}]),t}(a.Component),je=Object(ge.withStyles)(Ee)(Se),ke=function(e){var t=e.isPreviewed,n=e.handleSongPreview,a=e.song,i=e.song,l=i.performer,o=void 0===l?"":l,s=i.title,c=void 0===s?"":s,u=i.category,d=void 0===u?"":u,p=ve(a);return r.a.createElement(P.a,{open:t},r.a.createElement(Q,null,r.a.createElement(ee,null,r.a.createElement("div",{style:{padding:"20px 30px",height:"100%",overflow:"auto"}},r.a.createElement("h2",null,o?o+" - "+c:c),r.a.createElement("h4",null,d),p.map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,style:Ee.verse},r.a.createElement("span",{style:Ee.text},e.text),r.a.createElement("span",{style:Ee.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})}),r.a.createElement(v.a,{onClick:n},"Wyjd\u017a")))))},xe=n(49),we=n.n(xe),Oe=n(40),Ce=n.n(Oe),ze=n(51),Pe=n.n(ze),Ne=Pe()(Ce()()),We=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,isError:!1,error:{title:!1,description:!1,category:!1},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1,isError:!1,error:{title:!1,description:!1,category:!1}})},n.handleChange=function(e){var t=e.currentTarget.name,a=n.state,r=a.error,i=a.song;n.setState({song:Object(C.a)({},i,Object(p.a)({},t,e.target.value)),error:Object(C.a)({},r,Object(p.a)({},t,(r[t],!1)))})},n.handleChangeSongText=function(e){var t=e.currentTarget.name,a=n.state,r=a.error,i=a.song,l=e.target.value;l=(l=l.startsWith("\n")?l.substr(1):l).endsWith("\n\n\n")?l.substr(0,l.length-1):l,n.setState({song:Object(C.a)({},i,Object(p.a)({},t,l)),error:Object(C.a)({},r,Object(p.a)({},t,(r[t],!1)))})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.song,a=Object.keys(t).filter(function(e){return"performer"!==e}).filter(function(e){return""===t[e]}),r=a.reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,!0))},{});a.length>0?n.setState(Object(C.a)({},n.state,{isError:!0,error:r})):Kt.ref("songs-to-approve").push().set(Object(C.a)({},t,{isApproved:!1})).then(function(){alert("Added song successfully"),n.setState({open:!1,isError:!1,error:{},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}})}).catch(function(){return alert("Error has occurred")})},n.handleSongPreview=function(){var e=n.state.isPreviewed;n.setState(Object(C.a)({},n.state,{isPreviewed:!e}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.song,i=t.open,l=t.isPreviewed,o=t.isError,s=t.error,c=this.props.classes;return r.a.createElement(Ne,null,function(t){var u=t.width;return r.a.createElement(a.Fragment,null,"xs"===u||"sm"===u?r.a.createElement(we.a,{className:c.xs,onClick:e.handleOpen},r.a.createElement(ue.a,null)):r.a.createElement(v.a,{className:c.Btn,variant:"outlined",onClick:function(){return console.log("xs"===u)}},"Dodaj utw\xf3r"),r.a.createElement(P.a,{open:i,disableBackdropClick:!0,className:c.wrapper},r.a.createElement(Q,null,r.a.createElement(ee,null,r.a.createElement(ye,{song:n,handleSubmit:e.handleFormSubmit,handleChange:e.handleChange,handleChangeSongText:e.handleChangeSongText,handleCloseModal:e.handleClose,handleSongPreview:e.handleSongPreview,error:s,isError:o})))),r.a.createElement(ke,{isPreviewed:l,handleSongPreview:e.handleSongPreview,song:n}))})}}]),t}(a.Component),Ie=Object(ge.withStyles)(function(e){return{wrapper:{zIndex:5e3},Btn:{color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",borderColor:"white",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:200,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0"}}})(We),Te=n(60),Be=n(178),De=n.n(Be),Ae=n(239),Fe=n.n(Ae),Re=n(8),Le=n.n(Re);De.a.vfs=Fe.a.pdfMake.vfs;var Ue=Pe()(Ce()()),Me=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[]},n.createPDF=function(){var e=n.state,t=e.title,a=void 0===t?"":t,r=e.songs.map(function(e){return[{text:e.title,style:"header"},{columns:[{width:"75%",text:e.description.split("\n").map(function(e){return e.split("<")[0]?e.split("<")[0].trim():""}).join("\n")},{width:"20%",text:e.description.split("\n").map(function(e){return e.split("<")[1]?e.split("<")[1].trim().slice(0,-1).split(", ").join(" "):""}).join("\n")}]}]}),i={header:{text:"app.spiewnik - najwi\u0119ksza podr\u0119czna baza piosenek",style:"watermark"},footer:function(e,t){return[{text:e.toString()+" z "+t,alignment:"center"}]},content:[{text:a,style:"title"}].concat(Object(Te.a)(r)),styles:{title:{marginBottom:15,fontSize:25,bold:!0},header:{fontSize:18,bold:!0,marginBottom:6,marginTop:15},watermark:{marginLeft:40,marginTop:15,fontSize:8}}};De.a.createPdf(i).open()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.songs,n=this.props,a=n.classes,i=n.playlist;return r.a.createElement(Ue,null,function(n){var l=n.width;return"xs"===l||"sm"===l?r.a.createElement(we.a,{className:Le()(a.xs,a.active),disabled:Boolean(!t.length)&&!i,onClick:t.length?e.createPDF:null},r.a.createElement(ue.e,null)):r.a.createElement(v.a,{variant:"contained",className:Le()(a.Btn,a.active),disabled:Boolean(!t.length),onClick:t.length?e.createPDF:null},"Pobierz plik PDF")})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.songs.length!==t.songs.length?{title:e.title,songs:e.songs}:null}}]),t}(a.Component),Ze=Object(ge.withStyles)({Btn:{color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,display:"inline-flex"},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:130,zIndex:4e3,boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"}},active:{backgroundColor:"#DC244A",color:"white","&:hover":{backgroundColor:"#c72042"}},disabled:{color:"#cbd3df",backgroundColor:"#a4b0bd"}})(Me),Ge=n(98),Ve=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.songs,i=void 0===n?[]:n,l=e.removeSong;return r.a.createElement(a.Fragment,null,r.a.createElement(b.a,{className:t.title},"Wybrane piosenki"),r.a.createElement(Ge.c,{droppableId:"playlist"},function(e){return r.a.createElement(Y,Object.assign({ref:e.innerRef},e.droppableProps),i.map(function(e,n){var a=e.id,i=e.performer,o=e.title;return r.a.createElement(Ge.b,{key:n,draggableId:a,index:n},function(e){return r.a.createElement(X,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(T.a,{style:{width:"100%",padding:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"},elevation:1},r.a.createElement(b.a,{className:t.songTitle},n+1,". ",i?i+" - "+o:o),r.a.createElement(O.b,{onMouseEnter:function(e){return e.target.style.cursor="pointer"},onClick:function(){return l(a)},fontSize:20,style:{marginRight:15}})))})}),e.placeholder)}))}}]),t}(a.Component),qe=Object(ge.withStyles)({title:{fontSize:18,margin:"15px 0 15px 0"},songTitle:{fontSize:16}})(Ve),Je=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1,isEditing:!1,isError:!1,playlist:{id:null,title:"",isPublic:!1,songs:[]}},n.handleChange=function(e){n.setState(Object(C.a)({},n.state,{playlist:Object(C.a)({},n.state.playlist,{title:e.target.value})}))},n.handleSelectChange=function(e){n.setState(Object(C.a)({},n.state,{playlist:Object(C.a)({},n.state.playlist,{isPublic:Boolean(e.target.value)})}))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.playlist,a=n.props.user,r=Object.keys(t).filter(function(e){return"id"!==e}).filter(function(e){return""===t[e]||0===t[e].length}),i=r.reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,!0))},{});if(r.length>0)n.setState(Object(C.a)({},n.state,{isError:!0,error:i}));else if(t.id&&t.isPublic)Kt.ref("playlists/".concat(t.id)).update(t).then(function(){alert("Playlist edited successfully"),n.props.handleSelectSongs([])}).then(function(){return n.props.fetchData()}).catch(function(e){alert(e.message)});else if(null===t.id&&t.isPublic){var l=Kt.ref("playlists").push();l.set(Object(C.a)({},t,{id:l.key,userId:a.uid,userEmail:a.email})).then(function(){alert("Added playlist successfully"),n.props.handleSelectSongs([]),n.props.handleClose()}).catch(function(e){alert(e.message)})}else if(t.isPublic||t.id)t.isPublic||!t.id||Kt.ref("users/".concat(a.uid,"/playlists/").concat(t.id)).update(t).then(function(){alert("Playlist edited successfully"),n.props.handleSelectSongs([])}).then(function(){return n.props.fetchData()}).catch(function(e){alert(e.message)});else{var o=Kt.ref("users/".concat(a.uid,"/playlists")).push();o.set(Object(C.a)({},t,{id:o.key,userId:a.uid,userEmail:a.email})).then(function(){alert("Your private playlist added successfully"),n.props.handleSelectSongs([]),n.props.handleClose()}).catch(function(e){alert(e.message)})}},n.handleClose=function(){var e=n.props.handleClose;n.setState({open:!1,isEditing:!1,editedPlaylist:""}),e()},n.onDragEnd=function(e){var t=e.destination,a=e.source,r=e.draggableId,i=n.state.playlist.songs;if(t&&t.index!==a.index){var l=Array.from(n.state.playlist.songs);l.splice(a.index,1),l.splice(t.index,0,i.find(function(e){return e.id===r})),n.setState({playlist:Object(C.a)({},n.state.playlist,{songs:l})})}},n.handleRemovePlaylistSong=function(e){var t=n.state.playlist.songs.filter(function(t){return t.id!==e});n.setState(Object(C.a)({},n.state,{playlist:Object(C.a)({},n.state.playlist,{songs:t})}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isCreating,n=e.isEditing,a=e.isError,i=e.error,l=e.playlist,o=l.songs,s=void 0===o?[]:o,c=l.title,u=void 0===c?"":c,d=l.isPublic,p=void 0!==d&&d,m=this.props,h=m.classes,g=m.selectedSongs;m.user;return r.a.createElement(Ge.a,{onDragEnd:this.onDragEnd},r.a.createElement(P.a,{open:t||n,disableBackdropClick:!0,className:h.wrapper},r.a.createElement(Q,null,r.a.createElement(ee,null,r.a.createElement(te,null,a&&r.a.createElement(he,{type:"playlist",error:i}),r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:h.form},r.a.createElement(ae.a,{id:"outlined-full-width",label:"Nazwa",name:"nazwa",onChange:this.handleChange,value:u,autoComplete:"off",placeholder:"Podaj nazw\u0119 dla playlisty",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(oe.a,null,r.a.createElement(me.a,{shrink:!0,htmlFor:"select-multiple-native"},"Publiczne czy prywatne"),r.a.createElement(ie.a,{native:!0,value:p,onChange:this.handleSelectChange,name:"is-public",inputProps:{id:"select-multiple-native"}},r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),r.a.createElement("option",{value:!0},"Publiczne"),r.a.createElement("option",{value:!1},"Prywatne"))),r.a.createElement(qe,{songs:s,selectedSongs:g,removeSong:this.handleRemovePlaylistSong}),n&&r.a.createElement(de,{message:"Jesli chcesz doda\u0107 utwory, wr\xf3\u0107 do listy piosenek, zaznacz utwory i wr\xf3\u0107 tutaj ponownie. Wybrane piosenki pojawi\u0105 si\u0119 na dole listy. Pami\u0119taj, \u017ce nie pojawi si\u0119 piosenka, kt\xf3ra ju\u017c znajduje si\u0119 na li\u015bcie. "}),r.a.createElement(v.a,{style:{marginRight:15},type:"submit"},"Zatwierd\u017a"),r.a.createElement(v.a,{onClick:this.handleClose},"Wyjd\u017a")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.isCreating&&void 0!==e.selectedSongs&&void 0!==t.playlist.songs&&0===t.playlist.songs.length&&0!==e.selectedSongs.length&&!0!==e.isEditing&&!0!==t.isEditing)return Object(C.a)({},t,{isCreating:!0,playlist:Object(C.a)({},t.playlist,{title:"",songs:e.selectedSongs})});if(Boolean(e.editedPlaylist.id)&&e.isEditing&&!0!==t.isEditing){var n=void 0===e.editedPlaylist.songs?[]:e.editedPlaylist.songs,a=Object(Te.a)(n).concat(e.selectedSongs),r=a.map(function(e){return e.id}).map(function(e,t,n){return n.indexOf(e)===t&&t}).filter(function(e){return a[e]}).map(function(e){return a[e]});return Object(C.a)({},t,{playlist:Object(C.a)({},e.editedPlaylist,{songs:r}),isEditing:!0})}return null}}]),t}(a.Component),Ke=Object(ge.withStyles)(function(e){return{wrapper:{zIndex:2e3},form:Object(p.a)({marginTop:70},e.breakpoints.down("xs"),{marginTop:0})}})(Je),He=Pe()(Ce()()),Xe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1},n.handleCreate=function(){n.setState({isCreating:!0})},n.handleClose=function(){n.setState({isCreating:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isCreating,n=this.props.classes,i=this.props,l=i.selectedSongs,o=void 0===l?[]:l,s=i.editedPlaylist,c=void 0===s?"":s,u=i.handleSelectSongs,d=i.user;return r.a.createElement(He,null,function(i){var l=i.width;return r.a.createElement(a.Fragment,null,"xs"===l||"sm"===l?r.a.createElement(we.a,{className:n.xs,disabled:0===o.length,onClick:o.length>0?e.handleCreate:null},r.a.createElement(ue.g,null)):r.a.createElement(v.a,{variant:"outlined",disabled:0===o.length,className:n.Btn,onClick:o.length>0?e.handleCreate:null},"Dodaj playlist\u0119"),t&&r.a.createElement(Ke,{selectedSongs:o,handleSelectSongs:u,editedPlaylist:c,isCreating:t,handleClose:e.handleClose,user:d}))})}}]),t}(a.Component),Ye=Object(ge.withStyles)(function(e){return{Btn:{color:"white",borderColor:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:60,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"}}}})(Xe),Qe=n(128),$e=n.n(Qe),_e=n(83),et=n.n(_e),tt=n(63),nt=n.n(tt),at=n(243),rt=n.n(at),it=n(52),lt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",open:!1},n.handleChange=function(e){n.setState(Object(p.a)({},e.currentTarget.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password;n.props.isSignedUp?it.auth().createUserWithEmailAndPassword(a,r).then(function(e){it.database().ref("users/".concat(e.user.uid)).set({email:a,password:r,uid:e.user.uid}),alert("rejestracja sie udala, yay !")}).catch(function(e){alert(e.message)}):it.auth().signInWithEmailAndPassword(a,r).then(function(){alert("logowanie sie udalo, yay !")}).catch(function(e){alert(e.message),n.props.handleClose()})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isSignedUp,a=e.isOpen,i=e.handleClose,l=n?"Zarejestruj si\u0119":"Zaloguj si\u0119";return r.a.createElement(P.a,{open:a,onClose:function(){return i()},className:t.wrapper},r.a.createElement("main",{className:t.main},r.a.createElement(et.a,null),r.a.createElement(T.a,{className:t.paper},r.a.createElement($e.a,{className:t.avatar},r.a.createElement(rt.a,null)),r.a.createElement(b.a,{component:"h1",variant:"h5"},l),r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(oe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(me.a,{htmlFor:"email"},"Adres email"),r.a.createElement(nt.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(oe.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(me.a,{htmlFor:"password"},"Has\u0142o"),r.a.createElement(nt.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},l)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.open!==e.isOpen?{open:e.isOpen}:null}}]),t}(a.Component),ot=Object(ge.withStyles)(function(e){return{wrapper:{zIndex:4e3},main:Object(p.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(lt),st=(n(543),n(235),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,isSignedUp:!1,isOpen:!1},n.handleChange=function(e,t){n.setState({value:t})},n.handleSignInOpen=function(){n.setState({isOpen:!0,isSignedUp:!1})},n.handleSignUpOpen=function(){n.setState({isOpen:!0,isSignedUp:!0})},n.handleClose=function(){n.setState({isOpen:!1})},n.logOut=function(){it.auth().signOut()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"/lista-piosenek"===window.location.pathname&&this.setState({value:0}),"/playlisty"===window.location.pathname&&this.setState({value:1})}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.isSignedUp,i=e.isOpen,l=this.props,o=l.classes,s=l.user,c=l.selectedSongs,u=l.editedPlaylist,d=l.handleSelectSongs;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:Le()(o.AppBar,o.firstAppBar)},r.a.createElement("div",{className:o.maxWidth},r.a.createElement("div",{className:o.logoContainer},r.a.createElement(O.a,{className:o.logoIcon}),r.a.createElement(b.a,{component:m.a,to:"/lista-piosenek",variant:"h6",color:"inherit",className:o.logoText},"\u015apiewnik")),r.a.createElement("div",{className:o.userContainer},s?r.a.createElement(a.Fragment,null,r.a.createElement(b.a,{variant:"subtitle2",style:{color:"white"}},"U\u017cytkownik:",r.a.createElement("span",{style:{fontWeight:"bold"}}," ",s.email)),r.a.createElement(v.a,{className:Le()(o.Btn,o.logoutBtn),onClick:this.logOut},"Wyloguj si\u0119")):r.a.createElement(a.Fragment,null,r.a.createElement(ot,{isOpen:i,isSignedUp:n,handleClose:this.handleClose}),r.a.createElement(v.a,{className:Le()(o.Btn,o.loginBtn),onClick:this.handleSignInOpen},"Zaloguj si\u0119"),r.a.createElement(v.a,{variant:"contained",className:Le()(o.Btn,o.registerBtn),onClick:this.handleSignUpOpen},"Zarejestruj si\u0119"))))),r.a.createElement("div",{className:Le()(o.AppBar,o.secondAppBar)},r.a.createElement(w.a,{container:!0,className:o.maxWidth},r.a.createElement(w.a,{item:!0,lg:6,className:o.toolBarGrid},r.a.createElement(g.a,{variant:"dense"},r.a.createElement(S.a,{value:t,onChange:this.handleChange},r.a.createElement(k.a,{component:m.a,to:"/lista-piosenek",label:"Lista piosenek",classes:{label:"logo-text"}}),r.a.createElement(k.a,{component:m.a,to:"/playlisty",label:"Playlisty",classes:{label:"logo-text"}})))),r.a.createElement(w.a,{item:!0,md:6,sm:6,xs:12,className:o.flexEnd},r.a.createElement(Ie,null),s?r.a.createElement(Ye,{editedPlaylist:u,selectedSongs:c,handleSelectSongs:d,user:s}):null,r.a.createElement(Ze,{songs:c})))))}}]),t}(a.Component)),ct=Object(ge.withStyles)(function(e){return{AppBar:{backgroundColor:e.palette.primary.main,height:55,alignItems:"center"},firstAppBar:Object(p.a)({position:"static",boxShadow:"none"},e.breakpoints.down("xs"),{height:95,display:"flex",flexDirection:"column"}),secondAppBar:{position:"sticky",top:0,zIndex:1e3},logoIcon:Object(p.a)({fontSize:"38px",color:"white",marginRight:"25px"},e.breakpoints.down("xs"),{marginRight:5}),logoText:{letterSpacing:3,fontSize:22,textDecoration:"none",color:"white",fontFamily:"'Montserrat', sans-serif"},logoContainer:Object(p.a)({display:"flex",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-start"}),userContainer:Object(p.a)({display:"flex",justifyContent:"flex-end",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-end"}),maxWidth:Object(p.a)({height:"100%",maxWidth:1030,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexDirection:"column",justifyContent:"space-around",margin:0,width:"100%"}),Btn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginLeft:15},loginBtn:{"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},registerBtn:{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},logoutBtn:Object(p.a)({"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},e.breakpoints.down("xs"),{padding:0}),label:{textTransform:"none"},toolBarGrid:Object(p.a)({},e.breakpoints.down("xs"),{alignSelf:"flex-start"})}})(st),ut=function(e){var t=e.handleChange,n=e.label,a=e.placeholder;return r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(ae.a,{id:"standard-full-width",label:n,placeholder:a,fullWidth:!0,onChange:t,margin:"normal",InputLabelProps:{shrink:!0}}))},dt=n(69),pt=n.n(dt),mt=n(58),ht=n.n(mt),gt=n(59),ft=n.n(gt),bt=Pe()(Ce()()),yt="https://app-songbook.firebaseio.com/",vt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:"",playlists:[],editedPlaylist:{},isEditing:!1,isPublic:!0},n.getPublicPlaylists=function(){fetch("".concat(yt,"/playlists.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(C.a)({id:t},e[t])});n.setState({playlists:t||[]})})},n.getPrivatePlaylists=function(){var e=n.props.user;Kt.ref("users/".concat(e.uid,"/playlists")).once("value").then(function(e){var t=e.val(),a=t&&Object.keys(t).map(function(e){return Object(C.a)({id:e},t[e])});n.setState({playlists:a||[]})})},n.handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.handleCategorySelect=function(e){"public"===e&&(n.setState({isPublic:!0}),n.getPublicPlaylists()),"private"===e&&(n.setState({isPublic:!1}),n.getPrivatePlaylists())},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getPublicPlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputValue,a=void 0===n?"":n,i=t.playlists,l=void 0===i?[]:i,o=t.isPublic,s=this.props,c=s.classes,u=s.user,d=l.filter(function(e){var t=e.title.toLowerCase(),n=a.trim().toLowerCase();return t.includes(n)});return r.a.createElement(bt,null,function(t){var n=t.width;return r.a.createElement(J,{className:c.wrapper},r.a.createElement(w.a,{container:!0,spacing:"sm"===n||"xs"===n?0:24},r.a.createElement(w.a,{item:!0,md:4,xs:12},r.a.createElement(T.a,{className:c.categoriesContainer},r.a.createElement(pt.a,{component:"nav",style:{background:"white"}},r.a.createElement(ht.a,{button:!0,onClick:function(){return e.handleCategorySelect("public")}},r.a.createElement(ft.a,{primary:"publicze"})),r.a.createElement(ht.a,{button:!0,onClick:u?function(){return e.handleCategorySelect("private")}:null},r.a.createElement(ft.a,{primary:"prywatne"}))))),r.a.createElement(w.a,{item:!0,md:8,xs:12},r.a.createElement(K,{className:c.playlistsContainer},r.a.createElement(b.a,{className:c.categoryTitle},o?"Playlisty publiczne":"Playlisty prywatne"),r.a.createElement(ut,{handleChange:e.handleInputChange,label:"Wyszukaj playlist\u0119",placeholder:"Wpisz nazw\u0119 playlisty"}),d.map(function(e){return r.a.createElement($,{key:e.id},r.a.createElement(m.a,{key:e.id,to:o?"/playlisty/".concat(e.id):"users/".concat(u.uid,"/playlists/").concat(e.id),className:c.link},r.a.createElement(b.a,{className:c.playlistTitle},e.title),r.a.createElement(b.a,{className:c.playlistDescription},void 0!==e.songs&&e.songs.map(function(e,t,n){var a=e.performer,i=e.title,l=e.id;return t<n.length-1?r.a.createElement("span",{key:l},a?a+" - "+i:i,", "):r.a.createElement("span",{key:l},a?a+" - "+i:i)}))))})))))})}}]),t}(a.Component),Et=Object(ge.withStyles)(function(e){var t;return{wrapper:Object(p.a)({},e.breakpoints.down("xs"),{paddingTop:0}),playlistsContainer:{padding:10},playlistTitle:{fontSize:18,padding:"15px 15px 5px 15px"},playlistDescription:{padding:"0px 15px 15px 15px"},link:{textDecoration:"none"},categoriesContainer:(t={},Object(p.a)(t,e.breakpoints.down("xs"),{margin:10}),Object(p.a)(t,e.breakpoints.down("sm"),{margin:10}),t),categoryTitle:{fontSize:20,fontWeight:"bold",marginBottom:15}}})(vt),St=n(131),jt=n.n(St),kt=Object(ge.withStyles)(function(e){return{link:{textDecoration:"none"},title:{fontSize:16},category:{fontSize:13},checkbox:{width:"auto",padding:"0 10px 0 0"}}})(function(e){var t=e.song,n=t.id,a=t.performer,i=t.title,l=t.category,o=e.handleCheckboxSelect,s=e.checked,c=void 0===s?{}:s,u=e.classes;return r.a.createElement(H,{elevation:1},r.a.createElement(jt.a,{name:n,color:"primary",className:u.checkbox,icon:r.a.createElement(ue.c,{fontSize:"big"}),checkedIcon:r.a.createElement(ue.b,{fontSize:"big"}),checked:!!c[n]&&c[n],onChange:o}),r.a.createElement(m.a,{to:"/lista-piosenek/".concat(n),className:u.link},r.a.createElement(b.a,{className:u.title},a?a+" - "+i:i),r.a.createElement(b.a,{className:u.category}," "+l)))}),xt=n(244),wt=n(132),Ot=n.n(wt),Ct="https://app-songbook.firebaseio.com/",zt=Pe()(Ce()()),Pt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],category:"",searchText:"",selectedSongs:[],checked:{},isDrawerOpen:!1},n.fetchSongs=function(){fetch("".concat(Ct,"/songs.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(C.a)({id:t},e[t])});n.setState({songs:t||[]});var a=t.reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t.id,!1))},{}),r=n.props.selectedSongs,i=r.map(function(e){return e.id}).reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,!0))},{});n.setState(Object(C.a)({},n.state,{selectedSongs:r,checked:Object.assign(a,i)}))})},n.handleCategorySelect=function(e){n.setState({category:e})},n.handleChangeForm=function(e){n.setState({searchText:e.target.value.toLowerCase()})},n.handleCheckboxSelect=function(e){var t=e.target.name,a=n.state.songs.find(function(e){return e.id===t});if(!1===n.state.checked[t]){var r=[].concat(Object(Te.a)(n.state.selectedSongs),[a]);n.setState(function(e){return{checked:Object(C.a)({},e.checked,Object(p.a)({},t,!e.checked[t])),selectedSongs:r}}),n.props.handleSelectSongs(r)}else{var i=[].concat(Object(Te.a)(n.state.selectedSongs),[a]).filter(function(e){return e.id!==a.id});n.setState(function(e){return{checked:Object(C.a)({},e.checked,Object(p.a)({},t,!e.checked[t])),selectedSongs:i}}),n.props.handleSelectSongs(i)}},n.handleSelectAll=function(e){var t=n.state.checked,a=Object.keys(t).reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,!1))},{});e.forEach(function(e){return a[e.id]=!0}),n.setState(Object(C.a)({},n.state,{checked:a,selectedSongs:e})),n.props.handleSelectSongs(e)},n.handleClearSelectAll=function(){var e=n.state.checked,t=Object.keys(e).reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,!1))},{});n.setState({checked:t,selectedSongs:[]}),n.props.handleSelectSongs([])},n.toggleDrawer=function(e){n.setState(Object(C.a)({},n.state,{isDrawerOpen:e}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Kt.ref("songs").on("value",function(t){e.fetchSongs()})}},{key:"componentWillUnmount",value:function(){var e=this;Kt.ref("songs").off("value",function(t){e.fetchSongs()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.songs,i=void 0===n?[]:n,l=t.category,o=void 0===l?"":l,s=t.searchText,c=void 0===s?"":s,u=t.checked,d=this.props.classes,m=o?i.filter(function(e){return e.category===o}):i,h=(m=c?m.filter(function(e){return(e.performer.toLowerCase()+e.title.toLowerCase()).includes(c)}):m).sort(function(e,t){var n=e.performer+e.title,a=t.performer+t.title;return n.localeCompare(a)}),g=Object(Te.a)(new Set(h.map(function(e){return e.performer?e.performer:e.title}))).map(function(e){return e.charAt(0)}).reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t,t))},{}),f=Object(Te.a)(new Set(i.map(function(e){return e.category}))).map(function(t){return r.a.createElement(ht.a,{button:!0,onClick:function(){return e.handleCategorySelect(t)},key:t},r.a.createElement(ft.a,{primary:t}))});return r.a.createElement(zt,null,function(t){var n=t.width;return r.a.createElement(J,null,r.a.createElement(w.a,{container:!0,spacing:"xs"===n||"sm"===n?0:24},r.a.createElement(w.a,{item:!0,md:4},"xs"===n||"sm"===n?r.a.createElement(a.Fragment,null,r.a.createElement(we.a,{className:d.xs,onClick:function(){return e.toggleDrawer(!0)}},r.a.createElement(ue.f,null)),r.a.createElement(Ot.a,{open:e.state.isDrawerOpen,onClose:function(){return e.toggleDrawer(!1)},className:d.drawer},r.a.createElement("div",null,r.a.createElement(ht.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(ft.a,{primary:"wszystkie"})),f))):r.a.createElement(T.a,null,r.a.createElement(pt.a,{component:"nav",style:{background:"white"}},r.a.createElement(ht.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(ft.a,{primary:"wszystkie"})),f))),r.a.createElement(w.a,{item:!0,md:8,className:d.contentGrid},r.a.createElement(v.a,{onClick:function(){return e.handleSelectAll(m)},variant:"outlined",className:d.btn},"Zaznacz wszystkie"),r.a.createElement(v.a,{onClick:e.handleClearSelectAll,variant:"outlined",className:d.btn},"Wyczy\u015b\u0107"),r.a.createElement("div",{style:{width:"100%",margin:"5px 0 15px 0",padding:8}},r.a.createElement(ut,{handleChange:e.handleChangeForm,placeholder:"Wpisz nazw\u0119 artysty lub tytu\u0142 piosenki...",label:"Wyszukaj piosenk\u0119"})),h.map(function(t,n,i){return r.a.createElement(a.Fragment,{key:n},r.a.createElement(xt.a,{variant:"h4",style:{paddingLeft:10}},function(e,t,n,a){var r=e.performer?e.performer:e.title,i=t>0?n[t-1]:null,l=i?i.performer?i.performer:i.title:null;return i&&r===l?null:a[r.charAt(0)]}(t,n,i,g)),r.a.createElement(kt,{key:t.id,song:t,checked:u,handleCheckboxSelect:e.handleCheckboxSelect}))}))))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.selectedSongs.length!==t.selectedSongs.length){var n=t.songs.reduce(function(e,t){return Object(C.a)({},e,Object(p.a)({},t.id,!1))},{});return Object(C.a)({},t,{selectedSongs:e.selectedSongs,checked:n})}return null}}]),t}(a.Component),Nt=Object(ge.withStyles)(function(e){return{btn:{textTransform:"none",marginRight:15},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:270,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:hover":{backgroundColor:e.palette.primary.main,color:"white"}},contentGrid:{width:"100%"},drawer:{zIndex:5e3}}})(Pt),Wt=n(576),It=function(e){return e.history.push("/lista-piosenek"),r.a.createElement("div",null,"hello")},Tt=n(84),Bt=n.n(Tt),Dt=n(85),At=n.n(Dt),Ft=n(86),Rt=n.n(Ft),Lt=n(136),Ut=n.n(Lt),Mt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isEditing:!1,playlist:{},open:!1},n.getPlaylist=function(){var e=n.props.match.params,t=e.userId,a=e.playlistId;t?Kt.ref("users/".concat(t,"/playlists/").concat(a)).once("value").then(function(e){var t=e.val();n.setState({playlist:Object(C.a)({},t,{id:a})})}):Kt.ref("playlists/".concat(a)).once("value").then(function(e){var t=e.val();n.setState({playlist:Object(C.a)({},t,{id:a})})})},n.handleEditPlaylist=function(){n.setState({isEditing:!0})},n.handleCloseEditMode=function(){n.setState({isEditing:!1})},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleRemovePlaylist=function(e){var t=n.props.match.params,a=t.userId,r=t.playlistId;a?Kt.ref("users/".concat(a,"/playlists/").concat(r)).remove().then(function(){return alert("Removed playlist successfully")}).then(function(){return n.props.history.push("/playlisty")}).catch(function(e){return alert(e.message)}):Kt.ref("playlists/".concat(e)).remove().then(function(){return alert("Playlist removed")}).then(function(){return n.props.history.push("/playlisty")}).catch(function(e){return alert(e.message)})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getPlaylist()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isEditing,i=t.playlist,l=t.playlist,o=l.title,s=l.songs,c=void 0===s?[]:s,u=this.props,d=u.classes,p=u.selectedSongs,m=u.handleSelectSongs,h=u.user,g=!!(null!==h)&&h.email===i.userEmail;return r.a.createElement(J,{className:d.wrapper},n&&r.a.createElement(Ke,{isEditing:n,editedPlaylist:i,handleClose:this.handleCloseEditMode,selectedSongs:p,handleSelectSongs:m,fetchData:this.getPlaylist,user:h}),r.a.createElement(_,{className:d.container},r.a.createElement("h1",null,o),r.a.createElement("p",null,"Stworzone przez: ",i.userEmail),r.a.createElement("div",{className:d.buttonsWrapper},g?r.a.createElement(a.Fragment,null,r.a.createElement(v.a,{className:d.btn,onClick:function(){return e.handleEditPlaylist(i)}},"Edytuj"),r.a.createElement(v.a,{className:d.btn,onClick:this.handleOpen},"Usu\u0144"),r.a.createElement(P.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:d.paper},r.a.createElement(b.a,{variant:"h6"},"Czy na pewno chcesz usun\u0105\u0107 playlist\u0119?"),r.a.createElement(b.a,{variant:"subtitle1"},"Pami\u0119taj, \u017ce po usuni\u0119ciu playlisty nie ma mo\u017cliwo\u015bci jej przywr\xf3cenia."),r.a.createElement(v.a,{className:d.yesBtn,onClick:function(){return e.handleRemovePlaylist(i.id)}},"Tak"),r.a.createElement(v.a,{variant:"contained",className:d.noBtn,onClick:this.handleClose}," ","Nie")))):null,r.a.createElement(Ze,{playlist:!0,title:o,songs:c})),c.map(function(e){return r.a.createElement(Bt.a,{key:e.id},r.a.createElement(At.a,{expandIcon:r.a.createElement(Ut.a,null),className:d.summaryContainer},r.a.createElement(b.a,null,e.performer?e.performer+" - "+e.title:e.title)),r.a.createElement(Rt.a,{className:d.detailsContainer},r.a.createElement(b.a,{className:d.title},e.performer?e.performer+" - "+e.title:e.title),ve(e).map(function(e,t){return null!==e.text?r.a.createElement(b.a,{className:d.verse,key:t},r.a.createElement("span",{className:d.text},e.text),r.a.createElement("span",{className:d.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))})))}}]),t}(a.Component),Zt=Object(ge.withStyles)(function(e){return Object(p.a)({wrapper:Object(p.a)({},e.breakpoints.down("xs"),{paddingTop:0}),container:Object(p.a)({},e.breakpoints.down("xs"),{width:"100%",padding:10}),buttonsWrapper:{width:"100%",paddingBottom:"15px"},btn:{marginRight:15},yesBtn:{fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginRight:15},noBtn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},summaryContainer:{padding:5},detailsContainer:{display:"block",padding:5},title:{fontSize:18},verse:{fontSize:14,display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(p.a)({width:"75%"},e.breakpoints.down("xs"),{width:"70%"}),chords:Object(p.a)({width:"20%"},e.breakpoints.down("xs"),{width:"25%"}),paper:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:60*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none"}},"container",{width:"100%",padding:15})})(Mt),Gt=n(11),Vt=n.n(Gt),qt=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],isAdmin:!1,user:null},n.getSongs=function(){var e=n.props.user;Kt.ref("songs-to-approve").once("value").then(function(t){var a=t.val()||{},r=Object.keys(a).map(function(e){return Object(C.a)({id:e},a[e])});n.setState({songs:r||[],isAdmin:!0,ref:Kt.ref("songs"),user:e})}).catch(function(e){return alert("Probably permission denied")}),Kt.ref("songs-to-approve").on("value",function(e){var t=e.val()||{},a=Object.keys(t).map(function(e){return Object(C.a)({id:e},t[e])});n.setState({songs:a||[]})})},n.submitSong=function(e){var t=n.state.songs.find(function(t){return t.id===e});Kt.ref("songs/".concat(t.id)).set(Object(C.a)({},t)).then(function(){alert("Song approved"),Kt.ref("songs-to-approve/".concat(t.id)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})}).catch(function(e){return alert(e.message)})},n.deleteSong=function(e){Kt.ref("songs-to-approve/".concat(e)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props.user;this.state.ref&&this.state.ref.off(),null!==e||this.setState({songs:[],isAdmin:!1,user:null})}},{key:"componentDidUpdate",value:function(e){this.props.user!==e.user&&(this.getSongs(),this.setState({user:this.props.user}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.songs,a=void 0===n?[]:n,i=t.isAdmin,l=this.props.classes;return i?r.a.createElement(J,null,r.a.createElement(K,{className:l.songsWrapper},r.a.createElement("h1",null,"Do zatwierdzenia"),a.map(function(t){return r.a.createElement(Bt.a,{key:t.id},r.a.createElement(v.a,{color:"primary",variant:"outlined",onClick:function(){return e.submitSong(t.id)}},"Zatwierd\u017a"),r.a.createElement(v.a,{color:"secondary",variant:"outlined",onClick:function(){return e.deleteSong(t.id)}},"Usu\u0144"),r.a.createElement(At.a,{expandIcon:r.a.createElement(Ut.a,null)},r.a.createElement(b.a,null,t.performer?t.performer+" - "+t.title:t.title)),r.a.createElement(Rt.a,{style:{display:"block"}},ve(t).map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,style:Ee.verse},r.a.createElement("span",{style:Ee.text},e.text),r.a.createElement("span",{style:Ee.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))}))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null===e.user?Object(C.a)({},t,{user:null,isAdmin:!1}):null}}]),t}(a.Component),Jt=Vt()({songsWrapper:{width:"80%",marginBottom:16}})(qt);it.initializeApp({apiKey:"AIzaSyC8W028Pyt7eD2EXrvnqlAmXSD0zB007t4",authDomain:"app-songbook.firebaseapp.com",databaseURL:"https://app-songbook.firebaseio.com",projectId:"app-songbook",storageBucket:"app-songbook.appspot.com",messagingSenderId:"666603805553"});var Kt=it.database(),Ht=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,song:"",selectedSongs:[]},n.handleSelectSongs=function(e){n.setState({selectedSongs:e})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=it.auth().onAuthStateChanged(function(t){e.setState({user:t})});this.setState({ref:t})}},{key:"componentWillUnmount",value:function(){this.state.ref&&this.state.ref()}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedSongs,i=t.user;return r.a.createElement(a.Fragment,null,r.a.createElement(et.a,null),r.a.createElement(ct,{selectedSongs:n,handleSelectSongs:this.handleSelectSongs,user:i}),r.a.createElement(Wt.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(It,e)}}),r.a.createElement(Wt.a,{path:"/lista-piosenek/:songId",component:je}),r.a.createElement(Wt.a,{exact:!0,path:"/lista-piosenek",render:function(t){return r.a.createElement(Nt,Object.assign({handleSelectSongs:e.handleSelectSongs,selectedSongs:n},t))}}),r.a.createElement(Wt.a,{exact:!0,path:"/playlisty",render:function(e){return r.a.createElement(Et,Object.assign({user:i},e))}}),r.a.createElement(Wt.a,{path:"/playlisty/:playlistId",render:function(t){return r.a.createElement(Zt,Object.assign({},t,{selectedSongs:n,handleSelectSongs:e.handleSelectSongs,user:i}))}}),r.a.createElement(Wt.a,{path:"/users/:userId/playlists/:playlistId",render:function(t){return r.a.createElement(Zt,Object.assign({},t,{selectedSongs:n,handleSelectSongs:e.handleSelectSongs,user:i}))}}),r.a.createElement(Wt.a,{path:"/admin",render:function(e){return r.a.createElement(Jt,Object.assign({user:i},e))}}))}}]),t}(a.Component),Xt=n(577),Yt=Object(ge.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:{main:"#ee6a03",dark:"#e54e03",light:"#ee6a03"}},typography:{useNextVariants:!0}});l.a.render(r.a.createElement(Xt.a,null,r.a.createElement(ge.MuiThemeProvider,{theme:Yt},r.a.createElement(Ht,null))),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.a4c35fc5.chunk.js.map