(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,n){},310:function(e,t,n){e.exports=n(596)},596:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(33),o=n.n(i),l=n(8),s=n(24),c=n(25),u=n(27),d=n(26),p=n(28),m=n(7),h=n(597),g=n(130),f=n.n(g),b=n(22),y=n.n(b),v=n(15),w=n.n(v),E=n(131),S=n.n(E),k=n(96),j=n.n(k),x=n(50),O=n.n(x),C=n(39),P=n.n(C),z=n(136),N=n(35),I=n(34),W=n.n(I),A=n(42),D=n(43),T=n(32),B=n.n(T);function F(){var e=Object(A.a)(["\n\tpadding: 0px 25px 25px 25px;\n\theight: 100%;\n\toverflow-y: auto;\n\tposition: relative;\n"]);return F=function(){return e},e}function L(){var e=Object(A.a)(["\n\twidth: 700px;\n\theight: 100vh;\n\tbackground: white;\n\toutline: none;\n"]);return L=function(){return e},e}function R(){var e=Object(A.a)(["\n\twidth: 80%;\n\tpadding: 20px 60px 20px 60px;\n\tmargin-bottom: 60;\n\tfont-size: 16;\n"]);return R=function(){return e},e}function U(){var e=Object(A.a)(["\n\twidth: 100%;\n\tmargin: 15px auto 0px auto;\n"]);return U=function(){return e},e}function M(){var e=Object(A.a)(["\n\twidth: 80%;\n\tmargin-bottom: 20px;\n\tmargin: 0 auto 20px auto;\n"]);return M=function(){return e},e}function q(){var e=Object(A.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\talign-items: center;\n"]);return q=function(){return e},e}function Z(){var e=Object(A.a)([""]);return Z=function(){return e},e}function V(){var e=Object(A.a)(["\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n"]);return V=function(){return e},e}function G(){var e=Object(A.a)(["\n\tpadding: 10px 15px;\n\tmargin: 0px 10px 15px 10px;\n\tborder-radius: 0;\n\tdisplay: flex;\n\talign-items: start;\n"]);return G=function(){return e},e}function J(){var e=Object(A.a)(["\n\tflex-direction: column;\n"]);return J=function(){return e},e}function K(){var e=Object(A.a)(["\n\tmax-width: 1000px;\n\tmargin: 0 auto;\n\tpadding-top: 40px;\n\tmargin-bottom: 40px;\n\tdisplay: flex;\n\tjustify-content: center;\n"]);return K=function(){return e},e}var Y=function(e){var t=e.className,n=e.children;return r.a.createElement(B.a,{className:t},n)},H=Object(D.a)(function(e){var t=e.className,n=e.children;return r.a.createElement("div",{className:t},n)})(K()),X=D.a.div(J()),Q=Object(D.a)(Y)(G()),$=D.a.div(V()),_=D.a.div(Z()),ee=D.a.div(q()),te=(Object(D.a)(Y)(M()),Object(D.a)(Y)(U())),ne=Object(D.a)(Y)(R()),ae=D.a.div(L()),re=D.a.div(F()),ie=n(51),oe=n.n(ie),le=n(69),se=n.n(le),ce=n(49),ue=n.n(ce),de=n(128),pe=n.n(de),me=function(e){var t=e.message;return r.a.createElement(pe.a,{style:{backgroundColor:"#fca525",margin:"15px 0 35px 0",maxWidth:"100%"},message:r.a.createElement("span",{style:{display:"flex",marginLeft:"-5px"}},r.a.createElement(N.h,{style:{fontSize:50,height:"100%",marginRight:10}}),r.a.createElement("span",null,r.a.createElement("div",{style:{fontWeight:"bold"}},"Uwaga!"),t))})},he=n(48),ge=n.n(he),fe=n(13),be=function(e){return{modalTitle:{textAlign:"center",fontSize:28,paddingTop:15},form:{marginTop:10,marginBottom:40},textField:{display:"block",marginBottom:15,marginTop:0},select:{marginBottom:15},textFieldMultiline:{display:"block",margin:8},btn:{marginRight:15}}},ye=["polskie piosenki","zagraniczne piosenki","piosenki harcerskie","piosenki religijne","piosenki turystyczne","piosenki ludowe","pie\u015bni patriotyczne","piosenki dla dzieci","szanty","kol\u0119dy","biesiadne"],ve=Object(fe.withStyles)(be)(function(e){var t=e.song,n=t.category,a=void 0===n?"":n,i=t.title,o=void 0===i?"":i,l=t.performer,s=void 0===l?"":l,c=t.description,u=void 0===c?"":c,d=e.handleSubmit,p=e.handleChange,m=e.handleChangeSongText,h=e.handleCloseModal,g=e.handleSongPreview,f=e.error,b=e.classes;return r.a.createElement(re,null,r.a.createElement(y.a,{className:b.modalTitle},"DODAJ PIOSENK\u0118"),r.a.createElement("form",{onSubmit:d,className:b.form},r.a.createElement(oe.a,{id:"outlined-full-width",label:"Tytu\u0142 *",error:f.title,name:"title",style:be.textField,onChange:p,value:o,autoComplete:"off",placeholder:"Wpisz nazw\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(oe.a,{id:"outlined-full-width",label:"Wykonawca",name:"performer",style:be.textField,onChange:p,value:s,autoComplete:"off",placeholder:"Wpisz wykonawc\u0119 utworu",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ue.a,{error:f.category},r.a.createElement(ge.a,{shrink:!0,htmlFor:"select-multiple-native"},"Kategoria *"),r.a.createElement(se.a,{native:!0,value:a,onChange:p,name:"category",style:be.select,inputProps:{id:"select-multiple-native"}},a?null:r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),ye.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(me,{message:"Kolejne wersy oddzielaj enterem. Chwyty przypisane do danego wersu dodawaj w tej samej linii w nawiasach ostrych, oddzielonymi przecinkami, np. Gdzie strumyk p\u0142ynie z wolna... <G, d, C>."}),r.a.createElement(oe.a,{id:"outlined-textarea",label:"Tekst piosenki *",error:f.description,name:"description",onChange:m,value:u,placeholder:"Tutaj wpisz tekst piosenki oraz chwyty",style:be.textField,multiline:!0,rows:"18",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},helperText:"* pola obowi\u0105zkowe"}),r.a.createElement(w.a,{className:b.btn,type:"submit"},"Zatwierd\u017a"),r.a.createElement(w.a,{className:b.btn,onClick:h},"Wyjd\u017a"),r.a.createElement(w.a,{className:b.btn,onClick:g},"Podgl\u0105d")))}),we=n(52),Ee=n.n(we),Se=function(e){var t=e.description,n=(void 0===t?"":t).split("\n").map(function(e){return{text:e.split("<")[0]?e.split("<")[0].trim():null,chords:e.split("<")[1]?e.split("<")[1].trim().slice(0,-1).split(",").join(", "):null}});return""===n[n.length-1].text&&""===n[n.length-2].text&&(n.pop(),n.pop()),""===n[n.length-1].text&&n.pop(),n},ke=function(e){return{wrapper:Object(m.a)({zIndex:9e3,paddingBottom:115},e.breakpoints.down("sm"),{position:"relative",paddingTop:0}),verse:{display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("xs"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("xs"),{width:"25%"}),container:{width:"100%",padding:15},spinnerWrapper:{display:"flex",justifyContent:"center"}}},je=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={song:{},fetchInProgress:null},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.songId;this.setState({fetchInProgress:!0}),fetch("".concat("https://app-songbook.firebaseio.com","/songs/").concat(t,".json")).then(function(e){return e.json()}).then(function(t){e.setState({song:t,fetchInProgress:!1})})}},{key:"render",value:function(){var e=this.state,t=e.song,n=e.song,i=n.performer,o=void 0===i?"":i,l=n.title,s=void 0===l?"":l,c=n.category,u=void 0===c?"":c,d=e.fetchInProgress,p=this.props.classes,m=Se(t);return r.a.createElement(H,{className:p.wrapper},r.a.createElement(ne,{className:p.container},d?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(Ee.a,{type:"Oval",color:"#039be5",width:120,height:120})):r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,o?o+" - "+s:s),r.a.createElement("h4",null,u),m.map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,className:p.verse},r.a.createElement("span",{className:p.text},e.text),r.a.createElement("span",{className:p.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})}))))}}]),t}(a.Component),xe=Object(fe.withStyles)(ke)(je),Oe=Object(fe.withStyles)(ke)(function(e){var t=e.classes,n=e.isPreviewed,a=e.handleSongPreview,i=e.song,o=e.song,l=o.performer,s=void 0===l?"":l,c=o.title,u=void 0===c?"":c,d=o.category,p=void 0===d?"":d,m=Se(i);return r.a.createElement(W.a,{open:n,style:{zIndex:11e3}},r.a.createElement(ee,null,r.a.createElement(ae,null,r.a.createElement("div",{style:{padding:"20px 30px",height:"100%",overflow:"auto"}},r.a.createElement("h2",null,s?s+" - "+u:u),r.a.createElement("h4",null,p),m.map(function(e,n){return null!==e.text?r.a.createElement("p",{key:n,className:t.verse},r.a.createElement("span",{className:t.text},e.text),r.a.createElement("span",{className:t.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:n})}),r.a.createElement(w.a,{onClick:a},"Wr\xf3\u0107")))))}),Ce=n(38),Pe=n.n(Ce),ze=n(41),Ne=n.n(ze),Ie=Ne()(Pe()()),We=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,isError:!1,error:{title:!1,description:!1,category:!1},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}},n.handleOpen=function(){n.setState({open:!0}),document.querySelector("body").classList.add("not-scrollable")},n.handleClose=function(){n.setState({open:!1,isError:!1,error:{title:!1,description:!1,category:!1}}),document.querySelector("body").classList.remove("not-scrollable")},n.handleChange=function(e){var t=e.currentTarget.name,a=n.state,r=a.error,i=a.song;n.setState({song:Object(l.a)({},i,Object(m.a)({},t,e.target.value)),error:Object(l.a)({},r,Object(m.a)({},t,(r[t],!1)))})},n.handleChangeSongText=function(e){var t=e.currentTarget.name,a=n.state,r=a.error,i=a.song,o=e.target.value;o=(o=o.startsWith("\n")?o.substr(1):o).endsWith("\n\n\n")?o.substr(0,o.length-1):o,n.setState({song:Object(l.a)({},i,Object(m.a)({},t,o)),error:Object(l.a)({},r,Object(m.a)({},t,(r[t],!1)))})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.song,a=Object.keys(t).filter(function(e){return"performer"!==e}).filter(function(e){return""===t[e]}),r=a.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});a.length>0?n.setState(Object(l.a)({},n.state,{isError:!0,error:r})):Ht.ref("songs-to-approve").push().set(Object(l.a)({},t,{isApproved:!1})).then(function(){alert("Piosenka wys\u0142ana do moderacji! Akceptacja mo\u017ce potrwa\u0107 do kilku dni."),n.setState({open:!1,isError:!1,error:{},isPreviewed:!1,song:{title:"",performer:"",description:"",category:""}})}).catch(function(e){return alert(e.message)})},n.handleSongPreview=function(){var e=n.state.isPreviewed;n.setState(Object(l.a)({},n.state,{isPreviewed:!e}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.song,i=t.open,o=t.isPreviewed,l=t.isError,s=t.error,c=this.props.classes;return r.a.createElement(Ie,null,function(t){var u=t.width;return r.a.createElement(a.Fragment,null,"xs"===u||"sm"===u?r.a.createElement(O.a,{className:c.xs,onClick:e.handleOpen},r.a.createElement(N.a,null)):r.a.createElement(w.a,{className:c.Btn,variant:"outlined",onClick:e.handleOpen},"Dodaj utw\xf3r"),r.a.createElement(W.a,{open:i,className:c.wrapper},r.a.createElement(ee,null,r.a.createElement("div",{className:c.modalWrapper},r.a.createElement(ve,{song:n,handleSubmit:e.handleFormSubmit,handleChange:e.handleChange,handleChangeSongText:e.handleChangeSongText,handleCloseModal:e.handleClose,handleSongPreview:e.handleSongPreview,error:s,isError:l,screenSize:u})))),r.a.createElement(Oe,{isPreviewed:o,handleSongPreview:e.handleSongPreview,song:n}))})}}]),t}(a.Component),Ae=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:9800},modalWrapper:Object(m.a)({transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000",position:"absolute",top:0,height:"100%",width:"700px",background:"white",outline:"none"},e.breakpoints.down("sm"),{width:"100%",maxWidth:"100%",left:0}),Btn:Object(m.a)({color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",borderColor:"white",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},e.breakpoints.down("sm"),{"&:hover":{backgroundColor:e.palette.primary.main}}),xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:hover":{backgroundColor:e.palette.primary.main}}}})(We),De=n(56),Te=n(180),Be=n.n(Te),Fe=n(240),Le=n.n(Fe),Re=n(10),Ue=n.n(Re);Be.a.vfs=Le.a.pdfMake.vfs;var Me=Ne()(Pe()()),qe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[]},n.createPDF=function(){var e=n.state,t=e.title,a=void 0===t?"":t,r=e.songs.map(function(e,t){return[{text:t+1+". "+e.title,style:"header"},{columns:[{width:"75%",text:e.description.split("\n").map(function(e){return e.split("<")[0]?e.split("<")[0].trim():""}).join("\n")},{width:"20%",text:e.description.split("\n").map(function(e){return e.split("<")[1]?e.split("<")[1].trim().slice(0,-1).split(", ").join(" "):""}).join("\n")}]}]}),i={header:{text:"app.spiewnik - najwi\u0119ksza podr\u0119czna baza piosenek",style:"watermark"},footer:function(e,t){return[{text:e.toString()+" z "+t,alignment:"center"}]},content:[{text:a,style:"title"}].concat(Object(De.a)(r)),styles:{title:{marginBottom:15,fontSize:25,bold:!0},header:{fontSize:18,bold:!0,marginBottom:6,marginTop:15},watermark:{marginLeft:40,marginTop:15,fontSize:8}}};Be.a.createPdf(i).open()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.songs,n=this.props,a=n.classes,i=n.playlist;return r.a.createElement(Me,null,function(n){var o=n.width;return"xs"!==o&&"sm"!==o||i?r.a.createElement(w.a,{variant:"contained",className:Ue()(a.Btn,a.active),disabled:Boolean(!t.length),onClick:t.length?e.createPDF:null},"Pobierz plik PDF"):r.a.createElement(O.a,{className:Ue()(a.xs,a.active),disabled:Boolean(!t.length)&&!i,onClick:t.length?e.createPDF:null},r.a.createElement(N.d,null))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.songs.length!==t.songs.length?{title:e.title,songs:e.songs}:null}}]),t}(a.Component),Ze=Object(fe.withStyles)({Btn:{color:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,display:"inline-flex"},xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"}},active:{backgroundColor:"#DC244A",color:"white","&:hover":{backgroundColor:"#c72042"}},disabled:{color:"#cbd3df",backgroundColor:"#a4b0bd"}})(qe),Ve=n(98),Ge=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.songs,i=void 0===n?[]:n,o=e.removeSong;return r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{className:t.title},"Wybrane piosenki"),r.a.createElement(Ve.c,{droppableId:"playlist"},function(e){return r.a.createElement(_,Object.assign({ref:e.innerRef},e.droppableProps),i.map(function(e,n){var a=e.id,i=e.performer,l=e.title;return r.a.createElement(Ve.b,{key:n,draggableId:a,index:n},function(e){return r.a.createElement($,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(B.a,{style:{width:"100%",padding:"10px"},elevation:1},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(N.f,{className:t.dragIcon}),r.a.createElement(y.a,{className:t.songTitle},n+1,". ",i?i+" - "+l:l),r.a.createElement(z.b,{onMouseEnter:function(e){return e.target.style.cursor="pointer"},onClick:function(){return o(a)},className:t.trashIcon}))))})}),e.placeholder)}))}}]),t}(a.Component),Je=Object(fe.withStyles)({title:{fontSize:18,margin:"15px 0 15px 0"},songTitle:{width:"100%",fontSize:16,display:"flex",alignItems:"center"},dragIcon:{width:35,fontSize:27,marginRight:15},trashIcon:{width:35,fontSize:20,marginRight:15}})(Ge),Ke=n(137),Ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1,isEditing:!1,isError:!1,playlist:{id:null,title:"",isPublic:!1,songs:[]}},n.handleChange=function(e){n.setState(Object(l.a)({},n.state,{playlist:Object(l.a)({},n.state.playlist,{title:e.target.value})}))},n.handleSelectChange=function(e){n.setState(Object(l.a)({},n.state,{playlist:Object(l.a)({},n.state.playlist,{isPublic:Boolean(e.target.value)})}))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.playlist,a=n.props.user,r=Object.keys(t).filter(function(e){return"id"!==e}).filter(function(e){return""===t[e]||0===t[e].length}),i=r.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});if(r.length>0)n.setState(Object(l.a)({},n.state,{isError:!0,error:i}));else if(t.id&&t.isPublic){var o=Ht.ref("users/".concat(a.uid,"/playlists/").concat(t.id));Ht.ref("playlists/".concat(t.id)).update(t).then(function(){o.update(t).then(function(){alert("Playlista zosta\u0142a zedytowana"),n.props.handleSelectSongs([])})}).then(function(){return n.props.fetchData()}).catch(function(e){alert(e.message)})}else if(null===t.id&&t.isPublic){var s=Ht.ref("playlists").push(),c=Ht.ref("users/".concat(a.uid,"/playlists/").concat(s.key));s.set(Object(l.a)({},t,{id:s.key,userEmail:a.email})).then(function(){c.set(Object(l.a)({},t,{id:s.key,userEmail:a.email,isPublic:!0})).then(function(){alert("Doda\u0142e\u015b publiczn\u0105 playlist\u0119!"),n.props.handleSelectSongs([]),n.props.handleClose()})}).catch(function(e){alert(e.message)})}else if(t.isPublic||t.id)t.isPublic||!t.id||Ht.ref("users/".concat(a.uid,"/playlists/").concat(t.id)).update(t).then(function(){alert("Edycja playlisty powiod\u0142a si\u0119"),n.props.handleSelectSongs([])}).then(function(){return n.props.fetchData()}).catch(function(e){alert(e.message)});else{var u=Ht.ref("users/".concat(a.uid,"/playlists")).push();u.set(Object(l.a)({},t,{id:u.key,userId:a.uid,userEmail:a.email})).then(function(){alert("Twoja prywatna playlista zosta\u0142a dodana"),n.props.handleSelectSongs([]),n.props.handleClose()}).catch(function(e){alert(e.message)})}},n.handleClose=function(){var e=n.props.handleClose;n.setState({open:!1,isEditing:!1,editedPlaylist:""}),e()},n.onDragStart=function(){window.navigator.vibrate&&window.navigator.vibrate(100)},n.onDragEnd=function(e){var t=e.destination,a=e.source,r=e.draggableId,i=n.state.playlist.songs;if(t&&t.index!==a.index){var o=Array.from(n.state.playlist.songs);o.splice(a.index,1),o.splice(t.index,0,i.find(function(e){return e.id===r})),n.setState({playlist:Object(l.a)({},n.state.playlist,{songs:o})})}},n.handleRemovePlaylistSong=function(e){var t=n.state.playlist.songs.filter(function(t){return t.id!==e});n.setState(Object(l.a)({},n.state,{playlist:Object(l.a)({},n.state.playlist,{songs:t})}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isCreating,n=e.isEditing,a=e.isError,i=e.playlist,o=i.songs,l=void 0===o?[]:o,s=i.title,c=void 0===s?"":s,u=i.isPublic,d=void 0!==u&&u,p=this.props,m=p.classes,h=p.selectedSongs;return r.a.createElement(Ve.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.a.createElement(W.a,{open:t||n,className:m.wrapper},r.a.createElement(ee,null,r.a.createElement("div",{className:m.modalWrapper},r.a.createElement(re,null,r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:m.form},r.a.createElement(Ke.a,{className:m.modalTitle},"DODAJ PLAYLIST\u0118"),r.a.createElement(oe.a,{id:"outlined-full-width",label:"Nazwa",name:"nazwa",onChange:this.handleChange,value:c,error:a,autoComplete:"off",placeholder:"Podaj nazw\u0119 dla playlisty",margin:"normal",fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ue.a,null,r.a.createElement(ge.a,{shrink:!0,htmlFor:"select-multiple-native"},"Publiczne czy prywatne"),r.a.createElement(se.a,{native:!0,value:d,onChange:this.handleSelectChange,name:"is-public",inputProps:{id:"select-multiple-native"}},r.a.createElement("option",{value:""},"Wybierz kategori\u0119..."),r.a.createElement("option",{value:!0},"Publiczne"),r.a.createElement("option",{value:!1},"Prywatne"))),n&&r.a.createElement(me,{message:"Jesli chcesz doda\u0107 utwory, wr\xf3\u0107 do listy piosenek, zaznacz utwory i wr\xf3\u0107 tutaj ponownie. Wybrane piosenki pojawi\u0105 si\u0119 na dole listy. Pami\u0119taj, \u017ce nie pojawi si\u0119 piosenka, kt\xf3ra ju\u017c znajduje si\u0119 na li\u015bcie. "}),r.a.createElement(Je,{songs:l,selectedSongs:h,removeSong:this.handleRemovePlaylistSong}),r.a.createElement(w.a,{style:{marginRight:15},type:"submit"},"Zatwierd\u017a"),r.a.createElement(w.a,{onClick:this.handleClose},"Wyjd\u017a")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.isCreating&&void 0!==e.selectedSongs&&void 0!==t.playlist.songs&&0===t.playlist.songs.length&&0!==e.selectedSongs.length&&!0!==e.isEditing&&!0!==t.isEditing)return Object(l.a)({},t,{isCreating:!0,playlist:Object(l.a)({},t.playlist,{title:"",songs:e.selectedSongs})});if(Boolean(e.editedPlaylist.id)&&e.isEditing&&!0!==t.isEditing){var n=void 0===e.editedPlaylist.songs?[]:e.editedPlaylist.songs,a=Object(De.a)(n).concat(e.selectedSongs),r=a.map(function(e){return e.id}).map(function(e,t,n){return n.indexOf(e)===t&&t}).filter(function(e){return a[e]}).map(function(e){return a[e]});return Object(l.a)({},t,{playlist:Object(l.a)({},e.editedPlaylist,{songs:r}),isEditing:!0})}return null}}]),t}(a.Component),He=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:1e4},modalTitle:{textAlign:"center",fontSize:28},modalWrapper:Object(m.a)({width:700,height:"100vh",background:"white",outline:"none"},e.breakpoints.down("sm"),{top:0,left:0,width:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000",position:"absolute",height:"100%",background:"white",outline:"none"}),form:Object(m.a)({marginTop:70},e.breakpoints.down("sm"),{marginTop:10}),formWrapper:Object(m.a)({padding:"0px 25px 25px 25px",height:"100%",overflowY:"auto",position:"relative"},e.breakpoints.down("sm"),{padding:8})}})(Ye),Xe=Ne()(Pe()()),Qe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isCreating:!1},n.handleCreate=function(){n.setState({isCreating:!0}),document.querySelector("body").classList.add("not-scrollable")},n.handleClose=function(){n.setState({isCreating:!1}),document.querySelector("body").classList.remove("not-scrollable")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isCreating,n=this.props.classes,i=this.props,o=i.selectedSongs,l=void 0===o?[]:o,s=i.editedPlaylist,c=void 0===s?"":s,u=i.handleSelectSongs,d=i.user;return r.a.createElement(Xe,null,function(i){var o=i.width;return r.a.createElement(a.Fragment,null,"xs"===o||"sm"===o?r.a.createElement(O.a,{className:n.xs,disabled:0===l.length,onClick:l.length>0?e.handleCreate:null},r.a.createElement(N.g,null)):r.a.createElement(w.a,{variant:"outlined",disabled:0===l.length,className:n.Btn,onClick:l.length>0?e.handleCreate:null},"Dodaj playlist\u0119"),t&&r.a.createElement(He,{selectedSongs:l,handleSelectSongs:u,editedPlaylist:c,isCreating:t,handleClose:e.handleClose,user:d}))})}}]),t}(a.Component),$e=Object(fe.withStyles)(function(e){return{Btn:{color:"white",borderColor:"white",fontSize:"14px",fontWeight:"bold",textTransform:"none",padding:"3px 25px",marginLeft:15,"&:hover":{backgroundColor:"#02a8f4"}},xs:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"},"&:hover":{backgroundColor:e.palette.primary.main}}}})(Qe),_e=n(129),et=n.n(_e),tt=n(83),nt=n.n(tt),at=n(64),rt=n.n(at),it=n(244),ot=n.n(it),lt=n(55),st=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",open:!1,fetchInProgress:null},n.handleChange=function(e){n.setState(Object(m.a)({},e.currentTarget.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password;n.props.signUp?(n.setState({fetchInProgress:!0}),lt.auth().createUserWithEmailAndPassword(a,r).then(function(e){lt.database().ref("users/".concat(e.user.uid)).set({email:a,password:r,uid:e.user.uid}),alert("Rejestracja sie powiod\u0142a!"),n.setState({fetchInProgress:!1})}).catch(function(e){alert(e.message)})):(n.setState({fetchInProgress:!0}),lt.auth().signInWithEmailAndPassword(a,r).then(function(){alert("Logowanie sie powiod\u0142o!"),n.setState({fetchInProgress:!1}),n.props.handleClose(),Ht.ref("admins").once("value").then(function(e){e.val()&&(console.log("admin logged"),n.props.handleAdmin(!0))}).catch(function(){})}).catch(function(e){alert(e.message),n.props.handleClose()}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isSignedUp,a=e.isOpen,i=e.handleClose,o=this.state.fetchInProgress,l=n?"Zarejestruj si\u0119":"Zaloguj si\u0119";return r.a.createElement(W.a,{open:a,onClose:function(){return i()},className:t.wrapper},r.a.createElement("main",{className:t.main},r.a.createElement(nt.a,null),r.a.createElement(B.a,{className:t.paper},r.a.createElement(et.a,{className:t.avatar},r.a.createElement(ot.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},l),o?r.a.createElement("div",{className:t.spinnerWrapper},r.a.createElement(Ee.a,{type:"Oval",color:"#ee6a03",width:120,height:120})):null,r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ge.a,{htmlFor:"email"},"Adres email"),r.a.createElement(rt.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(ge.a,{htmlFor:"password"},"Has\u0142o"),r.a.createElement(rt.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},l)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.open!==e.isOpen?{open:e.isOpen}:null}}]),t}(a.Component),ct=Object(fe.withStyles)(function(e){return{wrapper:{zIndex:1e4},main:Object(m.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",position:"relative",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},spinnerWrapper:{position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:12e3}}})(st),ut=(n(565),n(236),Ne()(Pe()())),dt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,signUp:!1,isOpen:!1},n.handleChange=function(e,t){n.setState({value:t})},n.handleSignInOpen=function(){n.setState({isOpen:!0,signUp:!1}),document.querySelector("body").classList.add("not-scrollable")},n.handleSignUpOpen=function(){n.setState({isOpen:!0,signUp:!0}),document.querySelector("body").classList.add("not-scrollable")},n.handleClose=function(){n.setState({isOpen:!1}),document.querySelector("body").classList.remove("not-scrollable")},n.logOut=function(){lt.auth().signOut(),n.props.handleAdmin(!1)},n.goToAdminPage=function(){n.props.history.push("/spiewnik/admin")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){"/lista-piosenek"===window.location.pathname&&this.setState({value:0}),"/playlisty"===window.location.pathname&&this.setState({value:1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,i=t.signUp,o=t.isOpen,l=this.props,s=l.classes,c=l.user,u=l.selectedSongs,d=l.editedPlaylist,p=l.handleSelectSongs,m=l.handleAdmin,g=l.isAdmin;return r.a.createElement(ut,null,function(t){var l=t.width;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:Ue()(s.AppBar,s.firstAppBar)},r.a.createElement("div",{className:s.maxWidth},r.a.createElement("div",{className:s.logoContainer},r.a.createElement(z.a,{className:s.logoIcon}),r.a.createElement(y.a,{component:h.a,to:"/lista-piosenek",variant:"h6",color:"inherit",className:s.logoText},"\u015apiewnik"),g&&r.a.createElement(w.a,{onClick:e.goToAdminPage},"Admin")),r.a.createElement("div",{className:s.userContainer},c?r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{variant:"subtitle2",style:{color:"white"}},"U\u017cytkownik:",r.a.createElement("span",{style:{fontWeight:"bold"}}," ",c.email)),r.a.createElement(w.a,{className:Ue()(s.Btn,s.logoutBtn),onClick:e.logOut},"Wyloguj si\u0119")):r.a.createElement(a.Fragment,null,r.a.createElement(ct,{isOpen:o,signUp:i,handleClose:e.handleClose,handleAdmin:m}),r.a.createElement(w.a,{className:Ue()(s.Btn,s.loginBtn),onClick:e.handleSignInOpen},"Zaloguj si\u0119"),r.a.createElement(w.a,{variant:"contained",className:Ue()(s.Btn,s.registerBtn),onClick:e.handleSignUpOpen},"Zarejestruj si\u0119"))))),r.a.createElement("div",{className:Ue()(s.AppBar,s.secondAppBar)},r.a.createElement(P.a,{container:!0,className:s.maxWidth},r.a.createElement(P.a,{item:!0,lg:6,className:s.toolBarGrid},r.a.createElement(f.a,{variant:"dense"},r.a.createElement(S.a,{value:n,onChange:e.handleChange},r.a.createElement(j.a,{component:h.a,to:"/spiewnik/lista-piosenek",label:"Lista piosenek",classes:{label:"logo-text"}}),r.a.createElement(j.a,{component:h.a,to:"/spiewnik/playlisty",label:"Playlisty",classes:{label:"logo-text"}})))),r.a.createElement(P.a,{item:!0,md:6,sm:6,xs:12,className:s.flexEnd},"xs"===l||"sm"===l?r.a.createElement("div",{className:s.mobileDeviceButtonsContainer},r.a.createElement(O.a,{className:s.filterBtn,onClick:function(){return e.props.toggleDrawer(!0)},disabled:"/lista-piosenek"!==window.location.pathname},r.a.createElement(N.e,null)),r.a.createElement(Ae,null),c?r.a.createElement($e,{editedPlaylist:d,selectedSongs:u,handleSelectSongs:p,user:c}):null,r.a.createElement(Ze,{isButton:!0,songs:u})):r.a.createElement(a.Fragment,null,r.a.createElement(Ae,null),c?r.a.createElement($e,{editedPlaylist:d,selectedSongs:u,handleSelectSongs:p,user:c}):null,r.a.createElement(Ze,{songs:u}))))))})}}]),t}(a.Component),pt=Object(fe.withStyles)(function(e){return{AppBar:{backgroundColor:e.palette.primary.main,height:55,alignItems:"center"},firstAppBar:Object(m.a)({position:"static",boxShadow:"none"},e.breakpoints.down("xs"),{height:95,display:"flex",flexDirection:"column"}),secondAppBar:{position:"sticky",top:0,zIndex:9500},logoIcon:Object(m.a)({fontSize:"38px",color:"white",marginRight:"25px"},e.breakpoints.down("xs"),{marginRight:5}),logoText:{letterSpacing:3,fontSize:22,textDecoration:"none",color:"white",fontFamily:"'Montserrat', sans-serif"},logoContainer:Object(m.a)({display:"flex",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-start"}),userContainer:Object(m.a)({display:"flex",justifyContent:"flex-end",alignItems:"center"},e.breakpoints.down("xs"),{width:"100%",justifyContent:"flex-end"}),maxWidth:Object(m.a)({height:"100%",maxWidth:1030,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexDirection:"column",justifyContent:"space-around",margin:0,width:"100%"}),Btn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginLeft:15},loginBtn:{"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},registerBtn:{backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},logoutBtn:Object(m.a)({"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},e.breakpoints.down("xs"),{padding:0}),label:{textTransform:"none"},toolBarGrid:Object(m.a)({},e.breakpoints.down("xs"),{alignSelf:"flex-start"}),filterBtn:{fontSize:35,width:50,height:50,padding:0,borderRadius:50,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:disabled":{backgroundColor:"#c5c5c5",color:"white",boxShadow:"#464646 1px 2px 4px 0"},"&:hover":{backgroundColor:e.palette.primary.main,color:"white"}},mobileDeviceButtonsContainer:{position:"fixed",bottom:30,right:"50%",transform:"translate(50%, 0%)",width:250,display:"flex",justifyContent:"space-evenly"}}})(dt),mt=function(e){var t=e.handleChange,n=e.label,a=e.placeholder;return r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(oe.a,{id:"standard-full-width",label:n,placeholder:a,fullWidth:!0,onChange:t,margin:"normal",InputLabelProps:{shrink:!0}}))},ht=n(70),gt=n.n(ht),ft=n(53),bt=n.n(ft),yt=n(54),vt=n.n(yt),wt=Ne()(Pe()()),Et="https://app-songbook.firebaseio.com",St=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:"",playlists:[],editedPlaylist:{},isEditing:!1,isPublic:!0,category:"public",fetchInProgress:null},n.getPublicPlaylists=function(){n.setState({fetchInProgress:!0}),fetch("".concat(Et,"/playlists.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(l.a)({id:t},e[t])});n.setState({playlists:t||[]}),n.setState({fetchInProgress:!1})})},n.getPrivatePlaylists=function(){var e=n.props.user;e&&(n.setState({fetchInProgress:!0}),Ht.ref("users/".concat(e.uid,"/playlists/")).once("value").then(function(e){var t=e.val(),a=t&&Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])}),r=a?a.filter(function(e){return!1===e.isPublic}):[];n.setState({playlists:r||[]}),n.setState({fetchInProgress:!1})}))},n.getUsersPlaylists=function(){var e=n.props.user;e&&(n.setState({fetchInProgress:!0}),Ht.ref("users/".concat(e.uid,"/playlists/")).once("value").then(function(e){var t=e.val(),a=t&&Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])});n.setState({playlists:a||[]}),n.setState({fetchInProgress:!1})}))},n.handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.handleCategorySelect=function(e){"public"===e&&(n.setState({category:e,isPublic:!0}),n.getPublicPlaylists()),"private"===e&&(n.setState({category:e,isPublic:!1}),n.getPrivatePlaylists()),"yours"===e&&(n.setState({category:e}),n.getUsersPlaylists())},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPublicPlaylists()}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputValue,i=void 0===n?"":n,o=t.playlists,l=void 0===o?[]:o,s=t.category,c=t.isPublic,u=t.fetchInProgress,d=this.props,p=d.classes,m=d.user,g=l.filter(function(e){var t=e.title.toLowerCase(),n=i.trim().toLowerCase();return t.includes(n)});return r.a.createElement(wt,null,function(t){var n=t.width;return r.a.createElement(H,{className:p.wrapper},r.a.createElement(P.a,{container:!0,spacing:"sm"===n||"xs"===n?0:24},r.a.createElement(P.a,{item:!0,md:4,xs:12},r.a.createElement(B.a,{className:p.categoriesContainer},r.a.createElement(gt.a,{component:"nav",style:{background:"white"}},r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("public")}},r.a.createElement(vt.a,{primary:"publiczne"})),m&&r.a.createElement(a.Fragment,null,r.a.createElement(bt.a,{button:!0,onClick:m?function(){return e.handleCategorySelect("private")}:null},r.a.createElement(vt.a,{primary:"prywatne"})),r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("yours")}},r.a.createElement(vt.a,{primary:"twoje"})))))),r.a.createElement(P.a,{item:!0,md:8,xs:12},r.a.createElement(X,{className:p.playlistsContainer},r.a.createElement(y.a,{className:p.categoryTitle},"yours"===s?"Twoje utworzone playlisty":"public"===s?"Publiczne playlisty":"private"===s?"Prywatne playlisty":void 0),r.a.createElement(mt,{handleChange:e.handleInputChange,label:"Wyszukaj playlist\u0119",placeholder:"Wpisz nazw\u0119 playlisty"}),u?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(Ee.a,{type:"Oval",color:"#039be5",width:120,height:120})):g.map(function(e){return r.a.createElement(te,{key:e.id},r.a.createElement(h.a,{key:e.id,to:c?"/spiewnik/playlisty/".concat(e.id):"/spiewnik/users/".concat(m.uid,"/playlists/").concat(e.id),className:p.link},r.a.createElement(y.a,{className:p.playlistTitle},e.title),r.a.createElement(y.a,{className:p.playlistDescription},void 0!==e.songs&&e.songs.map(function(e,t,n){var a=e.performer,i=e.title,o=e.id;return t<4?t<n.length-1?r.a.createElement("span",{key:o},a?a+" - "+i:i,", "):r.a.createElement("span",{key:o},a?a+" - "+i:i):10===t?" ... ":null}))))})))))})}}]),t}(a.Component),kt=Object(fe.withStyles)(function(e){var t;return{wrapper:Object(m.a)({},e.breakpoints.down("xs"),{paddingTop:0,paddingBottom:"100px"}),playlistsContainer:{padding:10},playlistTitle:{fontSize:18,padding:"15px 15px 5px 15px"},playlistDescription:{padding:"0px 15px 15px 15px"},link:{textDecoration:"none"},categoriesContainer:(t={},Object(m.a)(t,e.breakpoints.down("xs"),{margin:10}),Object(m.a)(t,e.breakpoints.down("sm"),{margin:10}),t),categoryTitle:{fontSize:20,fontWeight:"bold",marginBottom:15},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(St),jt=n(132),xt=n.n(jt),Ot=Object(fe.withStyles)(function(e){return{link:{textDecoration:"none"},title:{fontSize:16},category:{fontSize:13},checkbox:{width:"auto",padding:"0 10px 0 0"}}})(function(e){var t=e.song,n=t.id,a=t.performer,i=t.title,o=t.category,l=e.handleCheckboxSelect,s=e.checked,c=void 0===s?{}:s,u=e.classes;return r.a.createElement(Q,{elevation:1},r.a.createElement(xt.a,{name:n,color:"primary",className:u.checkbox,icon:r.a.createElement(N.c,{fontSize:"big"}),checkedIcon:r.a.createElement(N.b,{fontSize:"big"}),checked:!!c[n]&&c[n],onChange:l}),r.a.createElement(h.a,{to:"/spiewnik/lista-piosenek/".concat(n),className:u.link},r.a.createElement(y.a,{className:u.title},a?a+" - "+i:i),r.a.createElement(y.a,{className:u.category}," "+o)))}),Ct=n(133),Pt=n.n(Ct),zt="https://app-songbook.firebaseio.com",Nt=Ne()(Pe()()),It=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],category:"",searchText:"",selectedSongs:[],checked:{},fetchInProgress:null},n.fetchSongs=function(){n.setState({fetchInProgress:!0}),fetch("".concat(zt,"/songs.json")).then(function(e){return e.json()}).then(function(e){var t=e&&Object.keys(e).map(function(t){return Object(l.a)({id:t},e[t])});n.setState({songs:t||[]});var a=t.reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t.id,!1))},{}),r=n.props.selectedSongs,i=r.map(function(e){return e.id}).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!0))},{});n.setState(Object(l.a)({},n.state,{selectedSongs:r,checked:Object.assign(a,i)})),n.setState({fetchInProgress:!1})})},n.handleCategorySelect=function(e){n.setState({category:e})},n.handleChangeForm=function(e){n.setState({searchText:e.target.value.toLowerCase()})},n.handleCheckboxSelect=function(e){var t=e.target.name,a=n.state.songs.find(function(e){return e.id===t});if(!1===n.state.checked[t]){var r=[].concat(Object(De.a)(n.state.selectedSongs),[a]);n.setState(function(e){return{checked:Object(l.a)({},e.checked,Object(m.a)({},t,!e.checked[t])),selectedSongs:r}}),n.props.handleSelectSongs(r)}else{var i=[].concat(Object(De.a)(n.state.selectedSongs),[a]).filter(function(e){return e.id!==a.id});n.setState(function(e){return{checked:Object(l.a)({},e.checked,Object(m.a)({},t,!e.checked[t])),selectedSongs:i}}),n.props.handleSelectSongs(i)}},n.handleSelectAll=function(e){var t=n.state.checked,a=Object.keys(t).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{}),r=Object(De.a)(n.state.selectedSongs).concat(e),i=r.map(function(e){return e.id}).map(function(e,t,n){return n.indexOf(e)===t&&t}).filter(function(e){return r[e]}).map(function(e){return r[e]});i.forEach(function(e){return a[e.id]=!0}),n.setState(Object(l.a)({},n.state,{checked:a,selectedSongs:i})),n.props.handleSelectSongs(i)},n.handleClearSelectAll=function(){var e=n.state.checked,t=Object.keys(e).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{});n.setState({checked:t,selectedSongs:[]}),n.props.handleSelectSongs([])},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ht.ref("songs").on("value",function(t){e.fetchSongs()})}},{key:"componentWillUnmount",value:function(){var e=this;Ht.ref("songs").off("value",function(t){e.fetchSongs()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.songs,i=void 0===n?[]:n,o=t.category,s=void 0===o?"":o,c=t.searchText,u=void 0===c?"":c,d=t.checked,p=t.fetchInProgress,h=this.props,g=h.classes,f=h.isDrawerOpen,b=s?i.filter(function(e){return e.category===s}):i,y=(b=u?b.filter(function(e){return(e.performer.toLowerCase()+e.title.toLowerCase()).includes(u)}):b).sort(function(e,t){var n=e.performer+e.title,a=t.performer+t.title;return n.localeCompare(a)}),v=Object(De.a)(new Set(y.map(function(e){return e.performer?e.performer:e.title}))).map(function(e){return e.charAt(0)}).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,t))},{}),E=Object(De.a)(new Set(i.map(function(e){return e.category}))).map(function(t){return r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect(t)},key:t},r.a.createElement(vt.a,{primary:t}))});return r.a.createElement(Nt,null,function(t){var n=t.width;return r.a.createElement(H,{className:g.wrapper},r.a.createElement(P.a,{container:!0,spacing:"xs"===n||"sm"===n?0:24},r.a.createElement(P.a,{item:!0,md:4},"xs"===n||"sm"===n?r.a.createElement(a.Fragment,null,r.a.createElement(Pt.a,{open:f,onClose:function(){return e.props.toggleDrawer(!1)},className:g.drawer},r.a.createElement("div",null,r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(vt.a,{primary:"wszystkie"})),E))):r.a.createElement(B.a,{className:g.categories},r.a.createElement(gt.a,{component:"nav",style:{background:"white"}},r.a.createElement(bt.a,{button:!0,onClick:function(){return e.handleCategorySelect("")}},r.a.createElement(vt.a,{primary:"wszystkie"})),E))),r.a.createElement(P.a,{item:!0,md:8,className:g.contentGrid},r.a.createElement(w.a,{onClick:function(){return e.handleSelectAll(b)},variant:"outlined",className:g.btn},"Zaznacz wszystkie"),r.a.createElement(w.a,{onClick:e.handleClearSelectAll,variant:"outlined",className:g.btn},"Wyczy\u015b\u0107"),r.a.createElement("div",{style:{width:"100%",margin:"5px 0 15px 0",padding:8}},r.a.createElement(mt,{handleChange:e.handleChangeForm,placeholder:"Wpisz nazw\u0119 artysty lub tytu\u0142 piosenki...",label:"Wyszukaj piosenk\u0119"})),p?r.a.createElement("div",{className:g.spinnerWrapper},r.a.createElement(Ee.a,{type:"Oval",color:"#039be5",width:120,height:120})):y.map(function(t,n,i){return r.a.createElement(a.Fragment,{key:n},r.a.createElement(Ke.a,{variant:"h4",style:{paddingLeft:10}},function(e,t,n,a){var r=e.performer?e.performer:e.title,i=t>0?n[t-1]:null,o=i?i.performer?i.performer:i.title:null;return i&&r===o?null:a[r.charAt(0)]}(t,n,i,v)),r.a.createElement(Ot,{key:t.id,song:t,checked:d,handleCheckboxSelect:e.handleCheckboxSelect}))}))))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.selectedSongs.length!==t.selectedSongs.length){if(0===e.selectedSongs.length){var n=t.checked,a=Object.keys(n).reduce(function(e,t){return Object(l.a)({},e,Object(m.a)({},t,!1))},{});return Object(l.a)({},t,{selectedSongs:[],checked:a})}return Object(l.a)({},t,{selectedSongs:e.selectedSongs})}return null}}]),t}(a.Component),Wt=Object(fe.withStyles)(function(e){return{wrapper:Object(m.a)({},e.breakpoints.down("xs"),{paddingBottom:"100px"}),btn:{textTransform:"none",marginRight:15},xs:{fontSize:35,position:"fixed",width:50,height:50,padding:0,borderRadius:50,bottom:20,right:270,zIndex:4e3,backgroundColor:e.palette.primary.main,color:"white",boxShadow:"#464646 1px 2px 4px 0","&:hover":{backgroundColor:e.palette.primary.main,color:"white"}},contentGrid:{width:"100%"},drawer:{zIndex:9600},categories:{position:"sticky",top:95},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(It),At=n(598),Dt=function(e){return console.log(e.history.location),e.history.push("/spiewnik/lista-piosenek"),r.a.createElement("div",null,"hello")},Tt=n(84),Bt=n.n(Tt),Ft=n(85),Lt=n.n(Ft),Rt=n(86),Ut=n.n(Rt),Mt=n(138),qt=n.n(Mt),Zt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isEditing:!1,playlist:{},open:!1,fetchInProgress:null},n.getPlaylist=function(){var e=n.props.match.params,t=e.userId,a=e.playlistId;if(t)return n.setState({fetchInProgress:!0}),void Ht.ref("users/".concat(t,"/playlists/").concat(a)).once("value").then(function(e){var t=e.val();n.setState({playlist:Object(l.a)({},t,{id:a})}),n.setState({fetchInProgress:!1})});n.setState({fetchInProgress:!0}),Ht.ref("playlists/".concat(a)).once("value").then(function(e){var t=e.val();n.setState({playlist:Object(l.a)({},t,{id:a})}),n.setState({fetchInProgress:!1})})},n.handleEditPlaylist=function(){n.setState({isEditing:!0})},n.handleCloseEditMode=function(){n.setState({isEditing:!1})},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleRemovePlaylist=function(e){var t=n.props.user;Ht.ref("playlists/".concat(e)).remove().then(function(){Ht.ref("users/".concat(t.uid,"/playlists/").concat(e)).remove().then(function(){alert("Playlist removed")}).then(function(){return n.props.history.push("/playlisty")})}).catch(function(e){return alert(e.message)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPlaylist()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isEditing,i=t.playlist,o=t.playlist,l=o.title,s=o.songs,c=void 0===s?[]:s,u=t.fetchInProgress,d=this.props,p=d.classes,m=d.selectedSongs,h=d.handleSelectSongs,g=d.user,f=!!(null!==g)&&g.email===i.userEmail;return r.a.createElement(H,{className:p.wrapper},n&&r.a.createElement(He,{isEditing:n,editedPlaylist:i,handleClose:this.handleCloseEditMode,selectedSongs:m,handleSelectSongs:h,fetchData:this.getPlaylist,user:g}),r.a.createElement(ne,{className:p.container},r.a.createElement("h1",null,l),r.a.createElement("p",null,"Stworzone przez: ",i.userEmail),r.a.createElement("div",{className:p.buttonsWrapper},f?r.a.createElement(a.Fragment,null,r.a.createElement(w.a,{className:p.btn,onClick:function(){return e.handleEditPlaylist(i)}},"Edytuj"),r.a.createElement(w.a,{className:p.btn,onClick:this.handleOpen},"Usu\u0144"),r.a.createElement(W.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:p.deleteModal},r.a.createElement(y.a,{variant:"h6"},"Czy na pewno chcesz usun\u0105\u0107 playlist\u0119?"),r.a.createElement(y.a,{variant:"subtitle1"},"Pami\u0119taj, \u017ce po usuni\u0119ciu playlisty nie ma mo\u017cliwo\u015bci jej przywr\xf3cenia."),r.a.createElement(w.a,{className:p.yesBtn,onClick:function(){return e.handleRemovePlaylist(i.id)}},"Tak"),r.a.createElement(w.a,{variant:"contained",className:p.noBtn,onClick:this.handleClose}," ","Nie")))):null,r.a.createElement(Ze,{playlist:!0,title:l,songs:c})),u?r.a.createElement("div",{className:p.spinnerWrapper},r.a.createElement(Ee.a,{type:"Oval",color:"#039be5",width:120,height:120})):c.map(function(e,t){return r.a.createElement(Bt.a,{key:e.id},r.a.createElement(Lt.a,{expandIcon:r.a.createElement(qt.a,null),className:p.summaryContainer},r.a.createElement(y.a,null,e.performer?t+1+". "+e.performer+" - "+e.title:t+1+". "+e.title)),r.a.createElement(Ut.a,{onClick:function(){return console.log(t.toString())},className:p.detailsContainer},r.a.createElement(y.a,{className:p.title},e.performer?e.performer+" - "+e.title:e.title),Se(e).map(function(e,t){return null!==e.text?r.a.createElement(y.a,{className:p.verse,key:t},r.a.createElement("span",{className:p.text},e.text),r.a.createElement("span",{className:p.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))})))}}]),t}(a.Component),Vt=Object(fe.withStyles)(function(e){return{wrapper:Object(m.a)({},e.breakpoints.down("sm"),{paddingTop:0}),container:Object(m.a)({width:"100%",padding:15},e.breakpoints.down("sm"),{width:"100%",padding:10}),buttonsWrapper:{width:"100%",paddingBottom:"15px"},btn:{marginRight:15},yesBtn:{fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",marginRight:15},noBtn:{color:"white",fontSize:"14px",textTransform:"none",fontWeight:"bold",padding:"3px 25px",backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,color:"#ececec"}},summaryContainer:Object(m.a)({padding:"0 15px"},e.breakpoints.down("sm"),{padding:"0 5px"}),detailsContainer:Object(m.a)({display:"block",padding:15},e.breakpoints.down("sm"),{padding:"0 5px"}),title:{fontSize:18},verse:{fontSize:14,display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("sm"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("sm"),{width:"25%"}),deleteModal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:60*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none"},spinnerWrapper:{display:"flex",justifyContent:"center"}}})(Zt),Gt=n(11),Jt=n.n(Gt),Kt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={songs:[],isAdmin:!1,user:null},n.getSongs=function(){var e=n.props.user;Ht.ref("songs-to-approve").once("value").then(function(t){var a=t.val()||{},r=Object.keys(a).map(function(e){return Object(l.a)({id:e},a[e])});n.setState({songs:r||[],isAdmin:!0,ref:Ht.ref("songs"),user:e})}).catch(function(e){return alert("Probably permission denied")}),Ht.ref("songs-to-approve").on("value",function(e){var t=e.val()||{},a=Object.keys(t).map(function(e){return Object(l.a)({id:e},t[e])});n.setState({songs:a||[]})})},n.submitSong=function(e){var t=n.state.songs.find(function(t){return t.id===e});Ht.ref("songs/".concat(t.id)).set(Object(l.a)({},t)).then(function(){alert("Song approved"),Ht.ref("songs-to-approve/".concat(t.id)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})}).catch(function(e){return alert(e.message)})},n.deleteSong=function(e){Ht.ref("songs-to-approve/".concat(e)).remove().then(function(){return alert("Song removed successfully")}).catch(function(e){return alert(e.message)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getSongs()}},{key:"componentWillUnmount",value:function(){var e=this.props.user;this.state.ref&&this.state.ref.off(),null!==e||this.setState({songs:[],isAdmin:!1,user:null})}},{key:"componentDidUpdate",value:function(e){this.props.user!==e.user&&(this.getSongs(),this.setState({user:this.props.user}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.songs,a=void 0===n?[]:n,i=t.isAdmin,o=this.props.classes;return i?r.a.createElement(H,null,r.a.createElement(X,{className:o.songsWrapper},r.a.createElement("h1",null,"Do zatwierdzenia"),a.map(function(t){return r.a.createElement(Bt.a,{key:t.id},r.a.createElement(w.a,{color:"primary",variant:"outlined",onClick:function(){return e.submitSong(t.id)}},"Zatwierd\u017a"),r.a.createElement(w.a,{color:"secondary",variant:"outlined",onClick:function(){return e.deleteSong(t.id)}},"Usu\u0144"),r.a.createElement(Lt.a,{expandIcon:r.a.createElement(qt.a,null)},r.a.createElement(y.a,null,t.performer?t.performer+" - "+t.title:t.title)),r.a.createElement(Ut.a,{style:{display:"block"}},Se(t).map(function(e,t){return null!==e.text?r.a.createElement("p",{key:t,className:o.verse},r.a.createElement("span",{className:o.text},e.text),r.a.createElement("span",{className:o.chords},e.chords?e.chords:null)):r.a.createElement("br",{key:t})})))}))):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return null===e.user?Object(l.a)({},t,{user:null,isAdmin:!1}):null}}]),t}(a.Component),Yt=Jt()(function(e){return{songsWrapper:Object(m.a)({width:"80%",margin:"0 8px 16px 8px"},e.breakpoints.down("sm"),{width:"100%"}),verse:{display:"flex",justifyContent:"space-between",margin:"10px 0"},text:Object(m.a)({width:"75%"},e.breakpoints.down("sm"),{width:"70%"}),chords:Object(m.a)({width:"20%"},e.breakpoints.down("sm"),{width:"25%"})}})(Kt);lt.initializeApp({apiKey:"AIzaSyC8W028Pyt7eD2EXrvnqlAmXSD0zB007t4",authDomain:"app-songbook.firebaseapp.com",databaseURL:"https://app-songbook.firebaseio.com",projectId:"app-songbook",storageBucket:"app-songbook.appspot.com",messagingSenderId:"666603805553"});var Ht=lt.database(),Xt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,isAdmin:!1,song:"",selectedSongs:[],isDrawerOpen:!1},n.handleSelectSongs=function(e){n.setState({selectedSongs:e})},n.toggleDrawer=function(e){n.setState(Object(l.a)({},n.state,{isDrawerOpen:e}))},n.handleAdmin=function(e){n.setState({isAdmin:e})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=lt.auth().onAuthStateChanged(function(t){e.setState({user:t})});this.setState({ref:t})}},{key:"componentWillUnmount",value:function(){this.state.ref&&this.state.ref()}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedSongs,i=t.user,o=t.isDrawerOpen,l=t.isAdmin;return r.a.createElement(a.Fragment,null,r.a.createElement(nt.a,null),r.a.createElement(At.a,{path:"/",render:function(t){return r.a.createElement(pt,Object.assign({},t,{selectedSongs:n,handleSelectSongs:e.handleSelectSongs,user:i,toggleDrawer:e.toggleDrawer,handleAdmin:e.handleAdmin,isAdmin:l}))}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik",render:function(e){return r.a.createElement(Dt,e)}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/lista-piosenek/:songId",component:xe}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/lista-piosenek",render:function(t){return r.a.createElement(Wt,Object.assign({handleSelectSongs:e.handleSelectSongs,selectedSongs:n,isDrawerOpen:o,toggleDrawer:e.toggleDrawer},t))}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/playlisty",render:function(e){return r.a.createElement(kt,Object.assign({user:i},e))}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/playlisty/:playlistId",render:function(t){return r.a.createElement(Vt,Object.assign({},t,{selectedSongs:n,handleSelectSongs:e.handleSelectSongs,user:i}))}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/users/:userId/playlists/:playlistId",render:function(t){return r.a.createElement(Vt,Object.assign({selectedSongs:n,handleSelectSongs:e.handleSelectSongs,user:i},t))}}),r.a.createElement(At.a,{exact:!0,path:"/spiewnik/admin",render:function(e){return r.a.createElement(Yt,Object.assign({user:i},e))}}))}}]),t}(a.Component),Qt=n(599),$t=Object(fe.createMuiTheme)({palette:{primary:{main:"#039be5"},secondary:{main:"#ee6a03",dark:"#e54e03",light:"#ee6a03"}},typography:{useNextVariants:!0}});o.a.render(r.a.createElement(Qt.a,null,r.a.createElement(fe.MuiThemeProvider,{theme:$t},r.a.createElement(Xt,null))),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.4aaa9df6.chunk.js.map